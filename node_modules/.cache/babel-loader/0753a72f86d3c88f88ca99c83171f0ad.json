{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\henriquet\\\\Desktop\\\\projetos\\\\SIM_WEB\\\\src\\\\pages\\\\Contas\\\\components\\\\InvoiceFormModal.js\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useSelector } from 'react-redux';\nimport * as Yup from 'yup';\nimport { toast } from 'react-toastify';\nimport PropTypes from 'prop-types';\nimport { Form, Input } from '@rocketseat/unform';\nimport Icon from '../../../components/Icons';\nimport CurrencyInput from '../../../components/CurrencyInput';\nimport api from '../../../services/api';\nimport { consumptionTypes } from '../../../util/consumption/types';\nimport { MonthEnum } from '../../../enums/month-enum';\nimport { Dropzone } from '../../../components/Dropzone';\nimport { Label } from '../../../components/Modal/styles';\n\nfunction emptyStringToNull(value, originalValue) {\n  if (typeof originalValue === 'string' && originalValue === '') {\n    return null;\n  }\n\n  return value;\n}\n\nconst schema = Yup.object().shape({\n  read: Yup.number().positive('O número deve ser maior que zero.').transform(emptyStringToNull).nullable().required('Consumo é obrigatório.'),\n  value: Yup.number().positive('O número deve ser maior que zero.').transform(emptyStringToNull).nullable().required('Valor é obrigatório.'),\n  attachment: Yup.mixed().nullable().transform(emptyStringToNull).required('Arquivo é obrigatório.')\n});\nexport default function InvoiceFormModal({\n  handleClose,\n  item,\n  loadInvoices\n}) {\n  const hotelID = useSelector(state => state.user.profile.activeHotel);\n  const hotelName = useSelector(state => state.user.profile.activeHotelName);\n  const [amount, setAmount] = useState('');\n  const [formUploadData, setFormUploadData] = useState(null);\n  const setMonth = MonthEnum[item.month_name];\n  const setYear = item.year;\n  const setTypeConsumption = consumptionTypes.find(type => type.value === item.clock_type);\n\n  async function handleSubmit(data) {\n    try {\n      const {\n        read,\n        value\n      } = data;\n      const formData = new FormData();\n      formData.append('read', read);\n      formData.append('value', value);\n      formData.append('hotel_id', JSON.parse(hotelID));\n      formData.append('invoice_id', item.id);\n      formData.append('file', formUploadData);\n      await api.put(`/invoices`, formData);\n      toast.success('Conta cadastrada com sucesso.');\n      handleClose();\n      loadInvoices();\n    } catch (error) {\n      toast.error('Não foi possível cadastrar conta.');\n    }\n  }\n\n  const handleDropDocument = files => {\n    const formData = new FormData();\n    formData.append('file', files[0]);\n    setFormUploadData(formData);\n  };\n\n  const buttonRef = useRef();\n  useEffect(() => {\n    const {\n      current\n    } = buttonRef;\n\n    const handleFocus = () => current.style.opacity = '0.8';\n\n    const handleBlur = () => current.style.opacity = '1';\n\n    current.addEventListener('focusin', handleFocus);\n    current.addEventListener('blur', handleBlur);\n    return () => {\n      current.removeEventListener('focusin', handleFocus);\n      current.removeEventListener('blur', handleBlur);\n    };\n  }, []);\n  return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n    className: \"modal__header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, \"Incluir conta de consumo\"), React.createElement(\"button\", {\n    className: \"close\",\n    type: \"button\",\n    onClick: handleClose,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, React.createElement(Icon, {\n    name: \"iconDelete\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"modal__body\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"modal__group-info\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"modal__group-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, \"Empreendimento\"), React.createElement(\"span\", {\n    className: \"modal__group-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }, hotelName)), React.createElement(\"div\", {\n    className: \"modal__group-info\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"modal__group-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }, \"M\\xEAs\"), React.createElement(\"span\", {\n    className: \"modal__group-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }, setMonth, \"/\", setYear)), React.createElement(\"div\", {\n    className: \"modal__group-info\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"modal__group-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }, \"Rel\\xF3gio\"), React.createElement(\"span\", {\n    className: \"modal__group-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }, `Relógio ${setTypeConsumption.name}`)), React.createElement(Form, {\n    schema: schema,\n    onSubmit: handleSubmit,\n    encType: \"multipart/form-data\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"form__group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }, React.createElement(Label, {\n    htmlFor: \"read\",\n    className: \"label_input\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }, \"Consumo\"), React.createElement(Input, {\n    className: \"form__input\",\n    name: \"read\",\n    type: \"number\",\n    id: \"read\",\n    placeholder: \"Informe o consumo\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"form__group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144\n    },\n    __self: this\n  }, React.createElement(Label, {\n    htmlFor: \"value\",\n    className: \"label_input\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145\n    },\n    __self: this\n  }, \"Valor\"), React.createElement(CurrencyInput, {\n    className: \"form__input\",\n    name: \"value\",\n    id: \"value\",\n    onChange: e => setAmount(e),\n    placeholder: \"R$ 0,00\",\n    value: amount,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"form__group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157\n    },\n    __self: this\n  }, React.createElement(Label, {\n    htmlFor: \"attachment\",\n    className: \"label_input\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158\n    },\n    __self: this\n  }, \"Anexo\", React.createElement(Dropzone, {\n    onDrop: handleDropDocument,\n    setFormUploadData: setFormUploadData,\n    formUploadData: formUploadData,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160\n    },\n    __self: this\n  }))), React.createElement(\"button\", {\n    ref: buttonRef,\n    className: \"btn btn-add\",\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167\n    },\n    __self: this\n  }, \"Incluir conta de consumo\"))));\n}\nInvoiceFormModal.propTypes = {\n  handleClose: PropTypes.func.isRequired,\n  // item: PropTypes.number,\n  loadInvoices: PropTypes.func.isRequired\n};\nInvoiceFormModal.defaultProps = {// item: null,\n};","map":{"version":3,"sources":["C:/Users/henriquet/Desktop/projetos/SIM_WEB/src/pages/Contas/components/InvoiceFormModal.js"],"names":["React","useState","useEffect","useRef","useSelector","Yup","toast","PropTypes","Form","Input","Icon","CurrencyInput","api","consumptionTypes","MonthEnum","Dropzone","Label","emptyStringToNull","value","originalValue","schema","object","shape","read","number","positive","transform","nullable","required","attachment","mixed","InvoiceFormModal","handleClose","item","loadInvoices","hotelID","state","user","profile","activeHotel","hotelName","activeHotelName","amount","setAmount","formUploadData","setFormUploadData","setMonth","month_name","setYear","year","setTypeConsumption","find","type","clock_type","handleSubmit","data","formData","FormData","append","JSON","parse","id","put","success","error","handleDropDocument","files","buttonRef","current","handleFocus","style","opacity","handleBlur","addEventListener","removeEventListener","name","e","propTypes","func","isRequired","defaultProps"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport * as Yup from 'yup';\nimport { toast } from 'react-toastify';\nimport PropTypes from 'prop-types';\nimport { Form, Input } from '@rocketseat/unform';\n\nimport Icon from '../../../components/Icons';\nimport CurrencyInput from '../../../components/CurrencyInput';\n\nimport api from '../../../services/api';\nimport { consumptionTypes } from '../../../util/consumption/types';\nimport { MonthEnum } from '../../../enums/month-enum';\n\nimport { Dropzone } from '../../../components/Dropzone';\n\nimport { Label } from '../../../components/Modal/styles';\n\nfunction emptyStringToNull(value, originalValue) {\n  if (typeof originalValue === 'string' && originalValue === '') {\n    return null;\n  }\n  return value;\n}\n\nconst schema = Yup.object().shape({\n  read: Yup.number()\n    .positive('O número deve ser maior que zero.')\n    .transform(emptyStringToNull)\n    .nullable()\n    .required('Consumo é obrigatório.'),\n  value: Yup.number()\n    .positive('O número deve ser maior que zero.')\n    .transform(emptyStringToNull)\n    .nullable()\n    .required('Valor é obrigatório.'),\n  attachment: Yup.mixed()\n    .nullable()\n    .transform(emptyStringToNull)\n    .required('Arquivo é obrigatório.'),\n});\n\nexport default function InvoiceFormModal({ handleClose, item, loadInvoices }) {\n  const hotelID = useSelector(state => state.user.profile.activeHotel);\n  const hotelName = useSelector(state => state.user.profile.activeHotelName);\n\n  const [amount, setAmount] = useState('');\n\n  const [formUploadData, setFormUploadData] = useState(null);\n\n  const setMonth = MonthEnum[item.month_name];\n  const setYear = item.year;\n  const setTypeConsumption = consumptionTypes.find(\n    type => type.value === item.clock_type\n  );\n\n  async function handleSubmit(data) {\n    try {\n      const { read, value } = data;\n\n      const formData = new FormData();\n\n      formData.append('read', read);\n      formData.append('value', value);\n      formData.append('hotel_id', JSON.parse(hotelID));\n      formData.append('invoice_id', item.id);\n      formData.append('file', formUploadData);\n\n      await api.put(`/invoices`, formData);\n\n      toast.success('Conta cadastrada com sucesso.');\n      handleClose();\n      loadInvoices();\n    } catch (error) {\n      toast.error('Não foi possível cadastrar conta.');\n    }\n  }\n\n  const handleDropDocument = files => {\n    const formData = new FormData();\n\n    formData.append('file', files[0]);\n    setFormUploadData(formData);\n  };\n\n  const buttonRef = useRef();\n\n  useEffect(() => {\n    const { current } = buttonRef;\n\n    const handleFocus = () => (current.style.opacity = '0.8');\n    const handleBlur = () => (current.style.opacity = '1');\n\n    current.addEventListener('focusin', handleFocus);\n    current.addEventListener('blur', handleBlur);\n\n    return () => {\n      current.removeEventListener('focusin', handleFocus);\n      current.removeEventListener('blur', handleBlur);\n    };\n  }, []);\n\n  return (\n    <>\n      <div className=\"modal__header\">\n        <h3>Incluir conta de consumo</h3>\n        <button className=\"close\" type=\"button\" onClick={handleClose}>\n          <Icon name=\"iconDelete\" />\n        </button>\n      </div>\n      <div className=\"modal__body\">\n        <div className=\"modal__group-info\">\n          <p className=\"modal__group-title\">Empreendimento</p>\n          <span className=\"modal__group-text\">{hotelName}</span>\n        </div>\n        <div className=\"modal__group-info\">\n          <p className=\"modal__group-title\">Mês</p>\n          <span className=\"modal__group-text\">\n            {setMonth}/{setYear}\n          </span>\n        </div>\n        <div className=\"modal__group-info\">\n          <p className=\"modal__group-title\">Relógio</p>\n          <span className=\"modal__group-text\">{`Relógio ${setTypeConsumption.name}`}</span>\n        </div>\n        <Form\n          schema={schema}\n          onSubmit={handleSubmit}\n          encType=\"multipart/form-data\"\n        >\n          <div className=\"form__group\">\n            <Label htmlFor=\"read\" className=\"label_input\">\n              Consumo\n            </Label>\n            <Input\n              className=\"form__input\"\n              name=\"read\"\n              type=\"number\"\n              id=\"read\"\n              placeholder=\"Informe o consumo\"\n            />\n          </div>\n          <div className=\"form__group\">\n            <Label htmlFor=\"value\" className=\"label_input\">\n              Valor\n            </Label>\n            <CurrencyInput\n              className=\"form__input\"\n              name=\"value\"\n              id=\"value\"\n              onChange={e => setAmount(e)}\n              placeholder=\"R$ 0,00\"\n              value={amount}\n            />\n          </div>\n          <div className=\"form__group\">\n            <Label htmlFor=\"attachment\" className=\"label_input\">\n              Anexo\n              <Dropzone\n                onDrop={handleDropDocument}\n                setFormUploadData={setFormUploadData}\n                formUploadData={formUploadData}\n              />\n            </Label>\n          </div>\n          <button ref={buttonRef} className=\"btn btn-add\" type=\"submit\">\n            Incluir conta de consumo\n          </button>\n        </Form>\n      </div>\n    </>\n  );\n}\n\nInvoiceFormModal.propTypes = {\n  handleClose: PropTypes.func.isRequired,\n  // item: PropTypes.number,\n  loadInvoices: PropTypes.func.isRequired,\n};\n\nInvoiceFormModal.defaultProps = {\n  // item: null,\n};\n"]},"metadata":{},"sourceType":"module"}