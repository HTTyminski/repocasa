{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\henriquet\\\\Desktop\\\\projetos\\\\SIM_WEB\\\\src\\\\pages\\\\Relogios\\\\index.js\";\nimport React, { useState, useEffect, useCallback, useRef, createRef } from 'react';\nimport { useSelector } from 'react-redux';\nimport * as Yup from 'yup';\nimport Shimmer from 'react-shimmer-effect';\nimport { toast } from 'react-toastify';\nimport { format, parseISO } from 'date-fns';\nimport { Form, Input, Select } from '@rocketseat/unform';\nimport { confirmAlert } from 'react-confirm-alert';\nimport 'react-confirm-alert/src/react-confirm-alert.css';\nimport Icon from '../../components/Icons';\nimport Modal from '../../components/Modal';\nimport LoadLine from '../../components/LoadLine';\nimport ConfirmAlert from '../../components/ConfirmAlert';\nimport DatePickerInput from '../../components/DatePickerInput';\nimport TimePickerInput from '../../components/TimePickerInput';\nimport TableDropDownCustom from '../../components/TableDropDownCustom';\nimport { StyledContainer, TableWrapper } from './styles';\nimport api from '../../services/api';\n\nfunction emptyStringToNull(value, originalValue) {\n  if (typeof originalValue === 'string' && originalValue === '') {\n    return null;\n  }\n\n  return value;\n}\n\nconst schemaCreate = Yup.object().shape({\n  name: Yup.string().required('Nome do relógio é obrigatório.'),\n  initial_read: Yup.number().positive().transform(emptyStringToNull).nullable().required('Leitura do relógio é obrigatória.'),\n  read_at_date: Yup.date().required('Data é obrigatória.'),\n  read_at_time: Yup.string().transform(emptyStringToNull).nullable().required('Hora é obrigatória.'),\n  read_unit_of_measurement: Yup.string(),\n  hour12: Yup.number(),\n  minute: Yup.number()\n});\nconst schemaEdit = Yup.object().shape({\n  name: Yup.string().required('Nome do relógio é obrigatório.'),\n  initial_read: Yup.number().positive().transform(emptyStringToNull).nullable().required('Leitura do relógio é obrigatória.')\n});\nconst clocksConfigs = [{\n  name: 'Gás',\n  value: 'GAS',\n  measurement: [{\n    name: 'quilograma',\n    value: 'KG'\n  }, {\n    name: 'metro cúbico (m³)',\n    value: 'M3'\n  }]\n}, {\n  name: 'Energia',\n  value: 'ELECTRICITY',\n  measurement: [{\n    name: 'quilowatt (kW)',\n    value: 'KW'\n  }]\n}, {\n  name: 'Água',\n  value: 'WATER',\n  measurement: [{\n    name: 'metro cúbico (m³)',\n    value: 'M3'\n  }]\n}];\nexport default function Relogios() {\n  const [loading, setLoading] = useState(false);\n  const [clocks, setClocks] = useState([]);\n  const [createModal, setCreateModal] = useState(false);\n  const [editModal, setEditModal] = useState(false);\n  const [getId, setId] = useState(); // eslint-disable-line\n\n  const [getItem, setItem] = useState();\n  const [initialData, setInitialData] = useState();\n  const clock = useSelector(state => state.clock);\n  console.log('clock state', clock);\n  const strClockType = clock.consumption.join();\n  const clockConfig = clocksConfigs.find(a => a.value === clock.consumption[0]);\n  const clockConfigMeasurement = clockConfig && clockConfig.measurement.map(item => {\n    return {\n      id: item.value,\n      title: item.name\n    };\n  });\n  const hotelID = useSelector(state => state.user.profile.activeHotel);\n  const hotelName = useSelector(state => state.user.profile.activeHotelName);\n  const loadClocks = useCallback(async () => {\n    try {\n      setLoading(true);\n      const response = await api.get(`/clocks`, {\n        params: {\n          hotel_id: hotelID,\n          clock_type: strClockType\n        }\n      });\n      const mapped = response.data.map(item => ({ ...item,\n        read_at_date: format(new Date(item.read_at_date), 'dd/MM/yyyy')\n      }));\n      setClocks(mapped);\n    } catch (error) {\n      toast.error('Não foi possível carregar relógios.');\n    }\n\n    setLoading(false);\n  }, [hotelID, strClockType]);\n  const buttonRef = useRef();\n  const buttonRefEdit = createRef();\n  useEffect(() => {\n    document.title = 'SIM - Consumo | Relógios';\n    loadClocks();\n  }, [loadClocks]);\n\n  function handleOpenAddModal() {\n    setCreateModal(true);\n  }\n\n  function handleCloseAddModal() {\n    setCreateModal(false);\n  }\n\n  async function getById(id) {\n    const response = await api.get(`/clocks/${id}`, {\n      params: {}\n    });\n    const {\n      data\n    } = response; // const hour = response.data.time.split(':')[0];\n    // const minute = response.data.time.split(':')[1];\n\n    setInitialData({ ...data,\n      read_at_date: parseISO(response.data.read_at_date)\n    });\n    setItem(response.data);\n  }\n\n  function handleOpenEditModal(id) {\n    setEditModal(true);\n    getById(id);\n  }\n\n  function handleCloseEditModal() {\n    setItem(null);\n    setEditModal(false);\n  }\n\n  async function handleSubmit(data) {\n    try {\n      const {\n        name,\n        hotel_id = Number(hotelID),\n        clock_type = strClockType,\n        initial_read,\n        read_at_date,\n        read_at_time,\n        read_unit_of_measurement\n      } = data;\n      await api.post('/clocks', {\n        name,\n        hotel_id,\n        clock_type,\n        initial_read,\n        read_at_date,\n        read_at_time,\n        read_unit_of_measurement\n      });\n      toast.success('Relógio cadastrado com sucesso.');\n      handleCloseAddModal();\n      loadClocks();\n    } catch (err) {\n      toast.error('Erro ao cadastrar relógio.');\n    }\n  }\n\n  async function handleEditClock(data) {\n    if (getItem.id) {\n      try {\n        const {\n          name,\n          clock_id = getItem.id,\n          initial_read\n        } = data;\n        await api.put(`/clocks`, {\n          name,\n          clock_id,\n          initial_read\n        });\n        toast.success('Relógio alterado com sucesso.');\n        handleCloseEditModal();\n        loadClocks();\n      } catch (err) {\n        toast.error('Erro ao editar relógio.');\n      }\n    }\n  }\n\n  async function handleDeleteClock(item) {\n    function deleteClock() {\n      try {\n        api.delete(`/clocks/${item.id}`);\n        toast.success('Relógio excluído com sucesso.');\n        setClocks(clocks.filter(currentClock => currentClock.id !== item.id));\n      } catch (err) {\n        toast.error('Não foi possível remover o relógio selecionado.');\n      }\n    }\n\n    confirmAlert({\n      customUI: ({\n        onClose\n      } // eslint-disable-line\n      ) => React.createElement(ConfirmAlert, {\n        callback: deleteClock,\n        onClose: onClose,\n        icon: React.createElement(Icon, {\n          name: \"iconTrash\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 254\n          },\n          __self: this\n        }),\n        title: \"Deletar rel\\xF3gio\",\n        message: React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 257\n          },\n          __self: this\n        }, \"Tem certeza que deseja deletar o rel\\xF3gio\", ' ', React.createElement(\"strong\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 259\n          },\n          __self: this\n        }, item.name), \" selecionado?\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251\n        },\n        __self: this\n      })\n    });\n  }\n\n  useEffect(() => {\n    const {\n      current\n    } = buttonRef;\n\n    if (current) {\n      const handleFocus = () => current.style.opacity = '0.8';\n\n      const handleBlur = () => current.style.opacity = '1';\n\n      current.addEventListener('focusin', handleFocus);\n      current.addEventListener('blur', handleBlur);\n      return () => {\n        current.removeEventListener('focusin', handleFocus);\n        current.removeEventListener('blur', handleBlur);\n      };\n    }\n  }, [createModal]);\n  useEffect(() => {\n    if (buttonRefEdit.current) {\n      buttonRefEdit.current.addEventListener('focus', function () {\n        buttonRefEdit.current.style.opacity = '0.8';\n      });\n      buttonRefEdit.current.addEventListener('blur', function () {\n        buttonRefEdit.current.style.opacity = '1';\n      });\n    }\n  }, [getItem]);\n  return React.createElement(React.Fragment, null, createModal && React.createElement(Modal, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 299\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"modal__header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301\n    },\n    __self: this\n  }, \"Incluir rel\\xF3gio\"), React.createElement(\"button\", {\n    className: \"close\",\n    type: \"button\",\n    onClick: handleCloseAddModal,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302\n    },\n    __self: this\n  }, React.createElement(Icon, {\n    name: \"iconDelete\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"modal__body\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"modal__group-info\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"modal__group-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312\n    },\n    __self: this\n  }, \"Empreendimento\"), React.createElement(\"span\", {\n    className: \"modal__group-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313\n    },\n    __self: this\n  }, hotelName)), clock.consumption.length > 0 && React.createElement(\"div\", {\n    className: \"modal__group-info\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"modal__group-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317\n    },\n    __self: this\n  }, \"Tipo\"), React.createElement(\"span\", {\n    className: \"modal__group-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318\n    },\n    __self: this\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319\n    },\n    __self: this\n  }, clockConfig.name))), React.createElement(Form, {\n    schema: schemaCreate,\n    onSubmit: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 323\n    },\n    __self: this\n  }, clockConfig && React.createElement(\"div\", {\n    className: \"form__group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 325\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"read_unit_of_measurement\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 326\n    },\n    __self: this\n  }, \"Medida\", React.createElement(Select, {\n    className: \"form__input\",\n    name: \"read_unit_of_measurement\",\n    options: clockConfigMeasurement,\n    placeholder: \"Selecionar medida...\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 328\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form__group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 337\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 338\n    },\n    __self: this\n  }, \"Nome do rel\\xF3gio\", React.createElement(Input, {\n    className: \"form__input\",\n    name: \"name\",\n    type: \"text\",\n    id: \"name\",\n    placeholder: \"Informe o nome\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 340\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form__group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 349\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"initial_read\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 350\n    },\n    __self: this\n  }, \"Leitura\", React.createElement(Input, {\n    className: \"form__input\",\n    name: \"initial_read\",\n    type: \"number\",\n    id: \"initial_read\",\n    placeholder: \"Informe a leitura\",\n    step: \"0.01\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 352\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form__group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 362\n    },\n    __self: this\n  }, React.createElement(DatePickerInput, {\n    className: \"form__input\",\n    name: \"read_at_date\",\n    label: \"Data\" // disabled={loading}\n    ,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 363\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"form__group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 370\n    },\n    __self: this\n  }, React.createElement(TimePickerInput, {\n    name: \"read_at_time\",\n    label: \"Hora\",\n    format: \"HH:mm\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 371\n    },\n    __self: this\n  })), React.createElement(\"button\", {\n    ref: buttonRef,\n    className: \"btn btn-add\",\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 377\n    },\n    __self: this\n  }, \"Cadastrar rel\\xF3gio\")))), editModal && getItem && React.createElement(Modal, {\n    id: getId,\n    name: getItem.name,\n    initial_read: getItem.initial_read,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 386\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"modal__header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 391\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 392\n    },\n    __self: this\n  }, \"Editar rel\\xF3gio\"), React.createElement(\"button\", {\n    className: \"close\",\n    type: \"button\",\n    onClick: handleCloseEditModal,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 393\n    },\n    __self: this\n  }, React.createElement(Icon, {\n    name: \"iconDelete\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 398\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"modal__body\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 401\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"modal__group-info\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 402\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"modal__group-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 403\n    },\n    __self: this\n  }, \"Empreendimento\"), React.createElement(\"span\", {\n    className: \"modal__group-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 404\n    },\n    __self: this\n  }, hotelName)), React.createElement(\"div\", {\n    className: \"modal__group-info\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 406\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"modal__group-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 407\n    },\n    __self: this\n  }, \"Tipo\"), React.createElement(\"span\", {\n    className: \"modal__group-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 408\n    },\n    __self: this\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 409\n    },\n    __self: this\n  }, clockConfig.name))), React.createElement(Form, {\n    initialData: initialData,\n    schema: schemaEdit,\n    onSubmit: handleEditClock,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 412\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"form__group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 417\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 418\n    },\n    __self: this\n  }, \"Nome do rel\\xF3gio\", React.createElement(Input, {\n    className: \"form__input\",\n    name: \"name\",\n    type: \"text\",\n    id: \"name\",\n    placeholder: \"Informe o nome\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 420\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form__group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 429\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"initial_read\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 430\n    },\n    __self: this\n  }, \"Leitura\", React.createElement(Input, {\n    className: \"form__input\",\n    name: \"initial_read\",\n    type: \"number\",\n    id: \"initial_read\",\n    placeholder: \"Informe a leitura\",\n    step: \"0.01\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 432\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form__group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 442\n    },\n    __self: this\n  }, React.createElement(DatePickerInput, {\n    className: \"form__input\",\n    name: \"read_at_date\",\n    label: \"Data\",\n    disabled: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 443\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"form__group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 450\n    },\n    __self: this\n  }, React.createElement(TimePickerInput, {\n    name: \"read_at_time\",\n    label: \"Hora\",\n    disabled: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 451\n    },\n    __self: this\n  })), React.createElement(\"button\", {\n    ref: buttonRefEdit,\n    id: \"buttonRefEdit\",\n    className: \"btn btn-add\",\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 453\n    },\n    __self: this\n  }, \"Editar rel\\xF3gio\")))), !clocks.length && !loading ? React.createElement(StyledContainer, {\n    className: \"content empty\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 467\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"inner\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 468\n    },\n    __self: this\n  }, React.createElement(Icon, {\n    name: \"iconClockBig\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 469\n    },\n    __self: this\n  }), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 470\n    },\n    __self: this\n  }, \"Nenhum rel\\xF3gio do tipo\", ' ', React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 472\n    },\n    __self: this\n  }, clockConfig ? clockConfig.name : 'Todos'), ' ', \"encontrado.\"), React.createElement(\"button\", {\n    type: \"button\",\n    onClick: handleOpenAddModal,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 475\n    },\n    __self: this\n  }, React.createElement(Icon, {\n    name: \"iconClockSmall\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 476\n    },\n    __self: this\n  }), \"Cadastrar novo rel\\xF3gio\"))) : React.createElement(StyledContainer, {\n    className: \"content full\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 482\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"inner\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 483\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 484\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 485\n    },\n    __self: this\n  }, \"Rel\\xF3gios cadastrados\", ' ', React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 487\n    },\n    __self: this\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 488\n    },\n    __self: this\n  }, clockConfig ? clockConfig.name : 'Todos'))), React.createElement(\"button\", {\n    type: \"button\",\n    onClick: handleOpenAddModal,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 491\n    },\n    __self: this\n  }, React.createElement(Icon, {\n    name: \"iconPlus\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 492\n    },\n    __self: this\n  }), \"Cadastrar rel\\xF3gio\")), React.createElement(TableWrapper, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 496\n    },\n    __self: this\n  }, React.createElement(\"table\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 497\n    },\n    __self: this\n  }, React.createElement(\"thead\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 498\n    },\n    __self: this\n  }, React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 499\n    },\n    __self: this\n  }, React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 500\n    },\n    __self: this\n  }, \"Nome do rel\\xF3gio\"), React.createElement(\"th\", {\n    width: \"15%\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 501\n    },\n    __self: this\n  }, \"Unidade de medida\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 502\n    },\n    __self: this\n  }, \"Data\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 503\n    },\n    __self: this\n  }, \"Hora\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 504\n    },\n    __self: this\n  }, \"Leitura\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 505\n    },\n    __self: this\n  }, \"\\xA0\"))), React.createElement(\"tbody\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 508\n    },\n    __self: this\n  }, loading ? React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 510\n    },\n    __self: this\n  }, React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 511\n    },\n    __self: this\n  }, React.createElement(Shimmer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 512\n    },\n    __self: this\n  }, React.createElement(LoadLine, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 513\n    },\n    __self: this\n  }))), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 516\n    },\n    __self: this\n  }, React.createElement(Shimmer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 517\n    },\n    __self: this\n  }, React.createElement(LoadLine, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 518\n    },\n    __self: this\n  }))), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 521\n    },\n    __self: this\n  }, React.createElement(Shimmer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 522\n    },\n    __self: this\n  }, React.createElement(LoadLine, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 523\n    },\n    __self: this\n  }))), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 526\n    },\n    __self: this\n  }, React.createElement(Shimmer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 527\n    },\n    __self: this\n  }, React.createElement(LoadLine, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 528\n    },\n    __self: this\n  }))), React.createElement(\"td\", {\n    colSpan: \"2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 531\n    },\n    __self: this\n  }, React.createElement(Shimmer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 532\n    },\n    __self: this\n  }, React.createElement(LoadLine, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 533\n    },\n    __self: this\n  })))) : clocks.map(item => React.createElement(\"tr\", {\n    key: item.id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 539\n    },\n    __self: this\n  }, React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 540\n    },\n    __self: this\n  }, item.name), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 541\n    },\n    __self: this\n  }, item.read_unit_of_measurement_formatted), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 542\n    },\n    __self: this\n  }, item.read_at_date), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 543\n    },\n    __self: this\n  }, item.read_at_time), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 544\n    },\n    __self: this\n  }, item.initial_read), React.createElement(\"td\", {\n    width: \"75\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 545\n    },\n    __self: this\n  }, React.createElement(TableDropDownCustom, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 546\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    type: \"button\",\n    onClick: () => {\n      handleOpenEditModal(item.id);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 547\n    },\n    __self: this\n  }, \"Editar\"), React.createElement(\"button\", {\n    type: \"button\",\n    onClick: () => {\n      handleDeleteClock(item);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 555\n    },\n    __self: this\n  }, \"Excluir\")))))))))));\n}","map":{"version":3,"sources":["C:/Users/henriquet/Desktop/projetos/SIM_WEB/src/pages/Relogios/index.js"],"names":["React","useState","useEffect","useCallback","useRef","createRef","useSelector","Yup","Shimmer","toast","format","parseISO","Form","Input","Select","confirmAlert","Icon","Modal","LoadLine","ConfirmAlert","DatePickerInput","TimePickerInput","TableDropDownCustom","StyledContainer","TableWrapper","api","emptyStringToNull","value","originalValue","schemaCreate","object","shape","name","string","required","initial_read","number","positive","transform","nullable","read_at_date","date","read_at_time","read_unit_of_measurement","hour12","minute","schemaEdit","clocksConfigs","measurement","Relogios","loading","setLoading","clocks","setClocks","createModal","setCreateModal","editModal","setEditModal","getId","setId","getItem","setItem","initialData","setInitialData","clock","state","console","log","strClockType","consumption","join","clockConfig","find","a","clockConfigMeasurement","map","item","id","title","hotelID","user","profile","activeHotel","hotelName","activeHotelName","loadClocks","response","get","params","hotel_id","clock_type","mapped","data","Date","error","buttonRef","buttonRefEdit","document","handleOpenAddModal","handleCloseAddModal","getById","handleOpenEditModal","handleCloseEditModal","handleSubmit","Number","post","success","err","handleEditClock","clock_id","put","handleDeleteClock","deleteClock","delete","filter","currentClock","customUI","onClose","current","handleFocus","style","opacity","handleBlur","addEventListener","removeEventListener","length","read_unit_of_measurement_formatted"],"mappings":"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","sourcesContent":["import React, {\r\n  useState,\r\n  useEffect,\r\n  useCallback,\r\n  useRef,\r\n  createRef,\r\n} from 'react';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport * as Yup from 'yup';\r\nimport Shimmer from 'react-shimmer-effect';\r\nimport { toast } from 'react-toastify';\r\nimport { format, parseISO } from 'date-fns';\r\nimport { Form, Input, Select } from '@rocketseat/unform';\r\nimport { confirmAlert } from 'react-confirm-alert';\r\nimport 'react-confirm-alert/src/react-confirm-alert.css';\r\n\r\nimport Icon from '../../components/Icons';\r\nimport Modal from '../../components/Modal';\r\nimport LoadLine from '../../components/LoadLine';\r\nimport ConfirmAlert from '../../components/ConfirmAlert';\r\nimport DatePickerInput from '../../components/DatePickerInput';\r\nimport TimePickerInput from '../../components/TimePickerInput';\r\n\r\nimport TableDropDownCustom from '../../components/TableDropDownCustom';\r\n\r\nimport { StyledContainer, TableWrapper } from './styles';\r\n\r\nimport api from '../../services/api';\r\n\r\nfunction emptyStringToNull(value, originalValue) {\r\n  if (typeof originalValue === 'string' && originalValue === '') {\r\n    return null;\r\n  }\r\n  return value;\r\n}\r\n\r\nconst schemaCreate = Yup.object().shape({\r\n  name: Yup.string().required('Nome do relógio é obrigatório.'),\r\n  initial_read: Yup.number()\r\n    .positive()\r\n    .transform(emptyStringToNull)\r\n    .nullable()\r\n    .required('Leitura do relógio é obrigatória.'),\r\n  read_at_date: Yup.date().required('Data é obrigatória.'),\r\n  read_at_time: Yup.string()\r\n    .transform(emptyStringToNull)\r\n    .nullable()\r\n    .required('Hora é obrigatória.'),\r\n  read_unit_of_measurement: Yup.string(),\r\n  hour12: Yup.number(),\r\n  minute: Yup.number(),\r\n});\r\n\r\nconst schemaEdit = Yup.object().shape({\r\n  name: Yup.string().required('Nome do relógio é obrigatório.'),\r\n  initial_read: Yup.number()\r\n    .positive()\r\n    .transform(emptyStringToNull)\r\n    .nullable()\r\n    .required('Leitura do relógio é obrigatória.'),\r\n});\r\n\r\nconst clocksConfigs = [\r\n  {\r\n    name: 'Gás',\r\n    value: 'GAS',\r\n    measurement: [\r\n      { name: 'quilograma', value: 'KG' },\r\n      { name: 'metro cúbico (m³)', value: 'M3' },\r\n    ],\r\n  },\r\n  {\r\n    name: 'Energia',\r\n    value: 'ELECTRICITY',\r\n    measurement: [{ name: 'quilowatt (kW)', value: 'KW' }],\r\n  },\r\n  {\r\n    name: 'Água',\r\n    value: 'WATER',\r\n    measurement: [{ name: 'metro cúbico (m³)', value: 'M3' }],\r\n  },\r\n];\r\n\r\nexport default function Relogios() {\r\n  const [loading, setLoading] = useState(false);\r\n  const [clocks, setClocks] = useState([]);\r\n  const [createModal, setCreateModal] = useState(false);\r\n  const [editModal, setEditModal] = useState(false);\r\n  const [getId, setId] = useState(); // eslint-disable-line\r\n  const [getItem, setItem] = useState();\r\n  const [initialData, setInitialData] = useState();\r\n\r\n  const clock = useSelector(state => state.clock);\r\n  console.log('clock state', clock);\r\n\r\n  const strClockType = clock.consumption.join();\r\n  const clockConfig = clocksConfigs.find(a => a.value === clock.consumption[0]);\r\n\r\n  const clockConfigMeasurement =\r\n    clockConfig &&\r\n    clockConfig.measurement.map(item => {\r\n      return {\r\n        id: item.value,\r\n        title: item.name,\r\n      };\r\n    });\r\n\r\n  const hotelID = useSelector(state => state.user.profile.activeHotel);\r\n  const hotelName = useSelector(state => state.user.profile.activeHotelName);\r\n\r\n  const loadClocks = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n\r\n      const response = await api.get(`/clocks`, {\r\n        params: {\r\n          hotel_id: hotelID,\r\n          clock_type: strClockType,\r\n        },\r\n      });\r\n\r\n      const mapped = response.data.map(item => ({\r\n        ...item,\r\n        read_at_date: format(new Date(item.read_at_date), 'dd/MM/yyyy'),\r\n      }));\r\n\r\n      setClocks(mapped);\r\n    } catch (error) {\r\n      toast.error('Não foi possível carregar relógios.');\r\n    }\r\n    setLoading(false);\r\n  }, [hotelID, strClockType]);\r\n\r\n  const buttonRef = useRef();\r\n  const buttonRefEdit = createRef();\r\n\r\n  useEffect(() => {\r\n    document.title = 'SIM - Consumo | Relógios';\r\n\r\n    loadClocks();\r\n  }, [loadClocks]);\r\n\r\n  function handleOpenAddModal() {\r\n    setCreateModal(true);\r\n  }\r\n\r\n  function handleCloseAddModal() {\r\n    setCreateModal(false);\r\n  }\r\n\r\n  async function getById(id) {\r\n    const response = await api.get(`/clocks/${id}`, {\r\n      params: {},\r\n    });\r\n\r\n    const { data } = response;\r\n\r\n    // const hour = response.data.time.split(':')[0];\r\n    // const minute = response.data.time.split(':')[1];\r\n\r\n    setInitialData({\r\n      ...data,\r\n      read_at_date: parseISO(response.data.read_at_date),\r\n    });\r\n\r\n    setItem(response.data);\r\n  }\r\n\r\n  function handleOpenEditModal(id) {\r\n    setEditModal(true);\r\n    getById(id);\r\n  }\r\n\r\n  function handleCloseEditModal() {\r\n    setItem(null);\r\n    setEditModal(false);\r\n  }\r\n\r\n  async function handleSubmit(data) {\r\n    try {\r\n      const {\r\n        name,\r\n        hotel_id = Number(hotelID),\r\n        clock_type = strClockType,\r\n        initial_read,\r\n        read_at_date,\r\n        read_at_time,\r\n        read_unit_of_measurement,\r\n      } = data;\r\n\r\n      await api.post('/clocks', {\r\n        name,\r\n        hotel_id,\r\n        clock_type,\r\n        initial_read,\r\n        read_at_date,\r\n        read_at_time,\r\n        read_unit_of_measurement,\r\n      });\r\n\r\n      toast.success('Relógio cadastrado com sucesso.');\r\n\r\n      handleCloseAddModal();\r\n\r\n      loadClocks();\r\n    } catch (err) {\r\n      toast.error('Erro ao cadastrar relógio.');\r\n    }\r\n  }\r\n\r\n  async function handleEditClock(data) {\r\n    if (getItem.id) {\r\n      try {\r\n        const { name, clock_id = getItem.id, initial_read } = data;\r\n\r\n        await api.put(`/clocks`, {\r\n          name,\r\n          clock_id,\r\n          initial_read,\r\n        });\r\n\r\n        toast.success('Relógio alterado com sucesso.');\r\n\r\n        handleCloseEditModal();\r\n\r\n        loadClocks();\r\n      } catch (err) {\r\n        toast.error('Erro ao editar relógio.');\r\n      }\r\n    }\r\n  }\r\n\r\n  async function handleDeleteClock(item) {\r\n    function deleteClock() {\r\n      try {\r\n        api.delete(`/clocks/${item.id}`);\r\n\r\n        toast.success('Relógio excluído com sucesso.');\r\n\r\n        setClocks(clocks.filter(currentClock => currentClock.id !== item.id));\r\n      } catch (err) {\r\n        toast.error('Não foi possível remover o relógio selecionado.');\r\n      }\r\n    }\r\n\r\n    confirmAlert({\r\n      customUI: (\r\n        { onClose } // eslint-disable-line\r\n      ) => (\r\n        <ConfirmAlert\r\n          callback={deleteClock}\r\n          onClose={onClose}\r\n          icon={<Icon name=\"iconTrash\" />}\r\n          title=\"Deletar relógio\"\r\n          message={\r\n            <p>\r\n              Tem certeza que deseja deletar o relógio{' '}\r\n              <strong>{item.name}</strong> selecionado?\r\n            </p>\r\n          }\r\n        />\r\n      ),\r\n    });\r\n  }\r\n\r\n  useEffect(() => {\r\n    const { current } = buttonRef;\r\n\r\n    if (current) {\r\n      const handleFocus = () => (current.style.opacity = '0.8');\r\n      const handleBlur = () => (current.style.opacity = '1');\r\n\r\n      current.addEventListener('focusin', handleFocus);\r\n      current.addEventListener('blur', handleBlur);\r\n\r\n      return () => {\r\n        current.removeEventListener('focusin', handleFocus);\r\n        current.removeEventListener('blur', handleBlur);\r\n      };\r\n    }\r\n  }, [createModal]);\r\n\r\n  useEffect(() => {\r\n    if (buttonRefEdit.current) {\r\n      buttonRefEdit.current.addEventListener('focus', function() {\r\n        buttonRefEdit.current.style.opacity = '0.8';\r\n      });\r\n\r\n      buttonRefEdit.current.addEventListener('blur', function() {\r\n        buttonRefEdit.current.style.opacity = '1';\r\n      });\r\n    }\r\n  }, [getItem]);\r\n\r\n  return (\r\n    <>\r\n      {createModal && (\r\n        <Modal>\r\n          <div className=\"modal__header\">\r\n            <h3>Incluir relógio</h3>\r\n            <button\r\n              className=\"close\"\r\n              type=\"button\"\r\n              onClick={handleCloseAddModal}\r\n            >\r\n              <Icon name=\"iconDelete\" />\r\n            </button>\r\n          </div>\r\n          <div className=\"modal__body\">\r\n            <div className=\"modal__group-info\">\r\n              <p className=\"modal__group-title\">Empreendimento</p>\r\n              <span className=\"modal__group-text\">{hotelName}</span>\r\n            </div>\r\n            {clock.consumption.length > 0 && (\r\n              <div className=\"modal__group-info\">\r\n                <p className=\"modal__group-title\">Tipo</p>\r\n                <span className=\"modal__group-text\">\r\n                  <strong>{clockConfig.name}</strong>\r\n                </span>\r\n              </div>\r\n            )}\r\n            <Form schema={schemaCreate} onSubmit={handleSubmit}>\r\n              {clockConfig && (\r\n                <div className=\"form__group\">\r\n                  <label htmlFor=\"read_unit_of_measurement\">\r\n                    Medida\r\n                    <Select\r\n                      className=\"form__input\"\r\n                      name=\"read_unit_of_measurement\"\r\n                      options={clockConfigMeasurement}\r\n                      placeholder=\"Selecionar medida...\"\r\n                    />\r\n                  </label>\r\n                </div>\r\n              )}\r\n              <div className=\"form__group\">\r\n                <label htmlFor=\"name\">\r\n                  Nome do relógio\r\n                  <Input\r\n                    className=\"form__input\"\r\n                    name=\"name\"\r\n                    type=\"text\"\r\n                    id=\"name\"\r\n                    placeholder=\"Informe o nome\"\r\n                  />\r\n                </label>\r\n              </div>\r\n              <div className=\"form__group\">\r\n                <label htmlFor=\"initial_read\">\r\n                  Leitura\r\n                  <Input\r\n                    className=\"form__input\"\r\n                    name=\"initial_read\"\r\n                    type=\"number\"\r\n                    id=\"initial_read\"\r\n                    placeholder=\"Informe a leitura\"\r\n                    step=\"0.01\"\r\n                  />\r\n                </label>\r\n              </div>\r\n              <div className=\"form__group\">\r\n                <DatePickerInput\r\n                  className=\"form__input\"\r\n                  name=\"read_at_date\"\r\n                  label=\"Data\"\r\n                  // disabled={loading}\r\n                />\r\n              </div>\r\n              <div className=\"form__group\">\r\n                <TimePickerInput\r\n                  name=\"read_at_time\"\r\n                  label=\"Hora\"\r\n                  format=\"HH:mm\"\r\n                />\r\n              </div>\r\n              <button ref={buttonRef} className=\"btn btn-add\" type=\"submit\">\r\n                Cadastrar relógio\r\n              </button>\r\n            </Form>\r\n          </div>\r\n        </Modal>\r\n      )}\r\n\r\n      {editModal && getItem && (\r\n        <Modal\r\n          id={getId}\r\n          name={getItem.name}\r\n          initial_read={getItem.initial_read}\r\n        >\r\n          <div className=\"modal__header\">\r\n            <h3>Editar relógio</h3>\r\n            <button\r\n              className=\"close\"\r\n              type=\"button\"\r\n              onClick={handleCloseEditModal}\r\n            >\r\n              <Icon name=\"iconDelete\" />\r\n            </button>\r\n          </div>\r\n          <div className=\"modal__body\">\r\n            <div className=\"modal__group-info\">\r\n              <p className=\"modal__group-title\">Empreendimento</p>\r\n              <span className=\"modal__group-text\">{hotelName}</span>\r\n            </div>\r\n            <div className=\"modal__group-info\">\r\n              <p className=\"modal__group-title\">Tipo</p>\r\n              <span className=\"modal__group-text\">\r\n                <strong>{clockConfig.name}</strong>\r\n              </span>\r\n            </div>\r\n            <Form\r\n              initialData={initialData}\r\n              schema={schemaEdit}\r\n              onSubmit={handleEditClock}\r\n            >\r\n              <div className=\"form__group\">\r\n                <label htmlFor=\"name\">\r\n                  Nome do relógio\r\n                  <Input\r\n                    className=\"form__input\"\r\n                    name=\"name\"\r\n                    type=\"text\"\r\n                    id=\"name\"\r\n                    placeholder=\"Informe o nome\"\r\n                  />\r\n                </label>\r\n              </div>\r\n              <div className=\"form__group\">\r\n                <label htmlFor=\"initial_read\">\r\n                  Leitura\r\n                  <Input\r\n                    className=\"form__input\"\r\n                    name=\"initial_read\"\r\n                    type=\"number\"\r\n                    id=\"initial_read\"\r\n                    placeholder=\"Informe a leitura\"\r\n                    step=\"0.01\"\r\n                  />\r\n                </label>\r\n              </div>\r\n              <div className=\"form__group\">\r\n                <DatePickerInput\r\n                  className=\"form__input\"\r\n                  name=\"read_at_date\"\r\n                  label=\"Data\"\r\n                  disabled\r\n                />\r\n              </div>\r\n              <div className=\"form__group\">\r\n                <TimePickerInput name=\"read_at_time\" label=\"Hora\" disabled />\r\n              </div>\r\n              <button\r\n                ref={buttonRefEdit}\r\n                id=\"buttonRefEdit\"\r\n                className=\"btn btn-add\"\r\n                type=\"submit\"\r\n              >\r\n                Editar relógio\r\n              </button>\r\n            </Form>\r\n          </div>\r\n        </Modal>\r\n      )}\r\n\r\n      {!clocks.length && !loading ? (\r\n        <StyledContainer className=\"content empty\">\r\n          <div className=\"inner\">\r\n            <Icon name=\"iconClockBig\" />\r\n            <p>\r\n              Nenhum relógio do tipo{' '}\r\n              <strong>{clockConfig ? clockConfig.name : 'Todos'}</strong>{' '}\r\n              encontrado.\r\n            </p>\r\n            <button type=\"button\" onClick={handleOpenAddModal}>\r\n              <Icon name=\"iconClockSmall\" />\r\n              Cadastrar novo relógio\r\n            </button>\r\n          </div>\r\n        </StyledContainer>\r\n      ) : (\r\n        <StyledContainer className=\"content full\">\r\n          <div className=\"inner\">\r\n            <div className=\"title\">\r\n              <p>\r\n                Relógios cadastrados{' '}\r\n                <span>\r\n                  <strong>{clockConfig ? clockConfig.name : 'Todos'}</strong>\r\n                </span>\r\n              </p>\r\n              <button type=\"button\" onClick={handleOpenAddModal}>\r\n                <Icon name=\"iconPlus\" />\r\n                Cadastrar relógio\r\n              </button>\r\n            </div>\r\n            <TableWrapper>\r\n              <table>\r\n                <thead>\r\n                  <tr>\r\n                    <th>Nome do relógio</th>\r\n                    <th width=\"15%\">Unidade de medida</th>\r\n                    <th>Data</th>\r\n                    <th>Hora</th>\r\n                    <th>Leitura</th>\r\n                    <th>&nbsp;</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {loading ? (\r\n                    <tr>\r\n                      <td>\r\n                        <Shimmer>\r\n                          <LoadLine />\r\n                        </Shimmer>\r\n                      </td>\r\n                      <td>\r\n                        <Shimmer>\r\n                          <LoadLine />\r\n                        </Shimmer>\r\n                      </td>\r\n                      <td>\r\n                        <Shimmer>\r\n                          <LoadLine />\r\n                        </Shimmer>\r\n                      </td>\r\n                      <td>\r\n                        <Shimmer>\r\n                          <LoadLine />\r\n                        </Shimmer>\r\n                      </td>\r\n                      <td colSpan=\"2\">\r\n                        <Shimmer>\r\n                          <LoadLine />\r\n                        </Shimmer>\r\n                      </td>\r\n                    </tr>\r\n                  ) : (\r\n                    clocks.map(item => (\r\n                      <tr key={item.id}>\r\n                        <td>{item.name}</td>\r\n                        <td>{item.read_unit_of_measurement_formatted}</td>\r\n                        <td>{item.read_at_date}</td>\r\n                        <td>{item.read_at_time}</td>\r\n                        <td>{item.initial_read}</td>\r\n                        <td width=\"75\">\r\n                          <TableDropDownCustom>\r\n                            <button\r\n                              type=\"button\"\r\n                              onClick={() => {\r\n                                handleOpenEditModal(item.id);\r\n                              }}\r\n                            >\r\n                              Editar\r\n                            </button>\r\n                            <button\r\n                              type=\"button\"\r\n                              onClick={() => {\r\n                                handleDeleteClock(item);\r\n                              }}\r\n                            >\r\n                              Excluir\r\n                            </button>\r\n                          </TableDropDownCustom>\r\n                        </td>\r\n                      </tr>\r\n                    ))\r\n                  )}\r\n                </tbody>\r\n              </table>\r\n            </TableWrapper>\r\n          </div>\r\n        </StyledContainer>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}