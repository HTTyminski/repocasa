{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\henriquet\\\\Desktop\\\\projetos\\\\SIM_WEB\\\\src\\\\components\\\\CurrencyInput\\\\index.js\";\nimport React, { useState, useEffect, useMemo, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport * as Yup from 'yup';\nimport { useField } from '@rocketseat/unform';\nimport CurrencyInputWrapper from 'react-currency-input';\nimport { getCurrencySymbol } from '../../util/format';\nimport { CurrencyInputContainer } from './styles'; // const schema = Yup.object().shape({\n//   read: Yup.number()\n//     .positive()\n//     .transform(emptyStringToNull)\n//     .nullable()\n//     .required('Consumo é obrigatório.'),\n//   value: Yup.number()\n//     .positive()\n//     .transform(emptyStringToNull)\n//     .nullable()\n//     .required('Valor é obrigatório.'),\n//   attachment: Yup.mixed()\n//     .nullable()\n//     .transform(emptyStringToNull)\n//     .required('Arquivo é obrigatório.'),\n// });\n\nexport default function CurrencyInput({\n  name,\n  label,\n  onChange,\n  ...rest\n}) {\n  const ref = useRef(null);\n  const {\n    fieldName,\n    registerField,\n    defaultValue,\n    error\n  } = useField(name);\n  const [amount, setAmount] = useState(defaultValue);\n  const currency = useMemo(() => getCurrencySymbol(), []);\n  useEffect(() => {\n    setAmount(defaultValue);\n  }, [defaultValue]);\n  useEffect(() => {\n    registerField({\n      name: fieldName,\n      ref: ref.current,\n      path: 'state.value'\n    });\n  }, [ref.current, fieldName]); // eslint-disable-line\n\n  return React.createElement(CurrencyInputContainer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: name,\n    maxLength: 3,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, label, React.createElement(CurrencyInputWrapper, Object.assign({\n    schema: schema,\n    id: name,\n    name: name,\n    prefix: `${currency} `,\n    decimalSeparator: \",\",\n    thousandSeparator: \".\",\n    ref: ref,\n    value: amount,\n    onChange: onChange // maxLength={3}\n\n  }, rest, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  })), error && React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, error)));\n}\nCurrencyInput.propTypes = {\n  name: PropTypes.string.isRequired,\n  label: PropTypes.string,\n  onChange: PropTypes.func\n};\nCurrencyInput.defaultProps = {\n  label: null,\n  onChange: null\n};","map":{"version":3,"sources":["C:/Users/henriquet/Desktop/projetos/SIM_WEB/src/components/CurrencyInput/index.js"],"names":["React","useState","useEffect","useMemo","useRef","PropTypes","Yup","useField","CurrencyInputWrapper","getCurrencySymbol","CurrencyInputContainer","CurrencyInput","name","label","onChange","rest","ref","fieldName","registerField","defaultValue","error","amount","setAmount","currency","current","path","schema","propTypes","string","isRequired","func","defaultProps"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,OAArC,EAA8CC,MAA9C,QAA4D,OAA5D;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAO,KAAKC,GAAZ,MAAqB,KAArB;AACA,SAASC,QAAT,QAAyB,oBAAzB;AACA,OAAOC,oBAAP,MAAiC,sBAAjC;AACA,SAASC,iBAAT,QAAkC,mBAAlC;AAEA,SAASC,sBAAT,QAAuC,UAAvC,C,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,eAAe,SAASC,aAAT,CAAuB;AAAEC,EAAAA,IAAF;AAAQC,EAAAA,KAAR;AAAeC,EAAAA,QAAf;AAAyB,KAAGC;AAA5B,CAAvB,EAA2D;AACxE,QAAMC,GAAG,GAAGZ,MAAM,CAAC,IAAD,CAAlB;AACA,QAAM;AAAEa,IAAAA,SAAF;AAAaC,IAAAA,aAAb;AAA4BC,IAAAA,YAA5B;AAA0CC,IAAAA;AAA1C,MAAoDb,QAAQ,CAACK,IAAD,CAAlE;AAEA,QAAM,CAACS,MAAD,EAASC,SAAT,IAAsBrB,QAAQ,CAACkB,YAAD,CAApC;AAEA,QAAMI,QAAQ,GAAGpB,OAAO,CAAC,MAAMM,iBAAiB,EAAxB,EAA4B,EAA5B,CAAxB;AAEAP,EAAAA,SAAS,CAAC,MAAM;AACdoB,IAAAA,SAAS,CAACH,YAAD,CAAT;AACD,GAFQ,EAEN,CAACA,YAAD,CAFM,CAAT;AAIAjB,EAAAA,SAAS,CAAC,MAAM;AACdgB,IAAAA,aAAa,CAAC;AACZN,MAAAA,IAAI,EAAEK,SADM;AAEZD,MAAAA,GAAG,EAAEA,GAAG,CAACQ,OAFG;AAGZC,MAAAA,IAAI,EAAE;AAHM,KAAD,CAAb;AAKD,GANQ,EAMN,CAACT,GAAG,CAACQ,OAAL,EAAcP,SAAd,CANM,CAAT,CAZwE,CAkB1C;;AAE9B,SACE,oBAAC,sBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAO,IAAA,OAAO,EAAEL,IAAhB;AAAsB,IAAA,SAAS,EAAE,CAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGC,KADH,EAEE,oBAAC,oBAAD;AACE,IAAA,MAAM,EAAEa,MADV;AAEE,IAAA,EAAE,EAAEd,IAFN;AAGE,IAAA,IAAI,EAAEA,IAHR;AAIE,IAAA,MAAM,EAAG,GAAEW,QAAS,GAJtB;AAKE,IAAA,gBAAgB,EAAC,GALnB;AAME,IAAA,iBAAiB,EAAC,GANpB;AAOE,IAAA,GAAG,EAAEP,GAPP;AAQE,IAAA,KAAK,EAAEK,MART;AASE,IAAA,QAAQ,EAAEP,QATZ,CAUE;;AAVF,KAWMC,IAXN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAFF,EAeGK,KAAK,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAOA,KAAP,CAfZ,CADF,CADF;AAqBD;AAEDT,aAAa,CAACgB,SAAd,GAA0B;AACxBf,EAAAA,IAAI,EAAEP,SAAS,CAACuB,MAAV,CAAiBC,UADC;AAExBhB,EAAAA,KAAK,EAAER,SAAS,CAACuB,MAFO;AAGxBd,EAAAA,QAAQ,EAAET,SAAS,CAACyB;AAHI,CAA1B;AAMAnB,aAAa,CAACoB,YAAd,GAA6B;AAC3BlB,EAAAA,KAAK,EAAE,IADoB;AAE3BC,EAAAA,QAAQ,EAAE;AAFiB,CAA7B","sourcesContent":["import React, { useState, useEffect, useMemo, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport * as Yup from 'yup';\nimport { useField } from '@rocketseat/unform';\nimport CurrencyInputWrapper from 'react-currency-input';\nimport { getCurrencySymbol } from '../../util/format';\n\nimport { CurrencyInputContainer } from './styles';\n\n// const schema = Yup.object().shape({\n//   read: Yup.number()\n//     .positive()\n//     .transform(emptyStringToNull)\n//     .nullable()\n//     .required('Consumo é obrigatório.'),\n//   value: Yup.number()\n//     .positive()\n//     .transform(emptyStringToNull)\n//     .nullable()\n//     .required('Valor é obrigatório.'),\n//   attachment: Yup.mixed()\n//     .nullable()\n//     .transform(emptyStringToNull)\n//     .required('Arquivo é obrigatório.'),\n// });\n\nexport default function CurrencyInput({ name, label, onChange, ...rest }) {\n  const ref = useRef(null);\n  const { fieldName, registerField, defaultValue, error } = useField(name);\n\n  const [amount, setAmount] = useState(defaultValue);\n\n  const currency = useMemo(() => getCurrencySymbol(), []);\n\n  useEffect(() => {\n    setAmount(defaultValue);\n  }, [defaultValue]);\n\n  useEffect(() => {\n    registerField({\n      name: fieldName,\n      ref: ref.current,\n      path: 'state.value',\n    });\n  }, [ref.current, fieldName]); // eslint-disable-line\n\n  return (\n    <CurrencyInputContainer>\n      <label htmlFor={name} maxLength={3}>\n        {label}\n        <CurrencyInputWrapper\n          schema={schema}\n          id={name}\n          name={name}\n          prefix={`${currency} `}\n          decimalSeparator=\",\"\n          thousandSeparator=\".\"\n          ref={ref}\n          value={amount}\n          onChange={onChange}\n          // maxLength={3}\n          {...rest}\n        />\n        {error && <span>{error}</span>}\n      </label>\n    </CurrencyInputContainer>\n  );\n}\n\nCurrencyInput.propTypes = {\n  name: PropTypes.string.isRequired,\n  label: PropTypes.string,\n  onChange: PropTypes.func,\n};\n\nCurrencyInput.defaultProps = {\n  label: null,\n  onChange: null,\n};\n"]},"metadata":{},"sourceType":"module"}