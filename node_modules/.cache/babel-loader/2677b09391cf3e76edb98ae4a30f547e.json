{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\henriquet\\\\Desktop\\\\projetos\\\\SIM_WEB\\\\src\\\\pages\\\\Relogios\\\\index.js\";\nimport React, { useState, useEffect, useCallback, useRef, useLayoutEffect, forwardRef } from 'react';\nimport { useSelector } from 'react-redux';\nimport * as Yup from 'yup';\nimport Shimmer from 'react-shimmer-effect';\nimport { toast } from 'react-toastify';\nimport { format, parseISO } from 'date-fns';\nimport { Form, Input, Select } from '@rocketseat/unform';\nimport { confirmAlert } from 'react-confirm-alert';\nimport 'react-confirm-alert/src/react-confirm-alert.css';\nimport Icon from '../../components/Icons';\nimport Modal from '../../components/Modal';\nimport LoadLine from '../../components/LoadLine';\nimport ConfirmAlert from '../../components/ConfirmAlert';\nimport DatePickerInput from '../../components/DatePickerInput';\nimport TimePickerInput from '../../components/TimePickerInput';\nimport TableDropDownCustom from '../../components/TableDropDownCustom';\nimport { StyledContainer, TableWrapper } from './styles';\nimport api from '../../services/api';\n\nfunction emptyStringToNull(value, originalValue) {\n  if (typeof originalValue === 'string' && originalValue === '') {\n    return null;\n  }\n\n  return value;\n}\n\nconst schemaCreate = Yup.object().shape({\n  name: Yup.string().required('Nome do relógio é obrigatório.'),\n  initial_read: Yup.number().positive().transform(emptyStringToNull).nullable().required('Leitura do relógio é obrigatória.'),\n  read_at_date: Yup.date().required('Data é obrigatória.'),\n  read_at_time: Yup.string().transform(emptyStringToNull).nullable().required('Hora é obrigatória.'),\n  read_unit_of_measurement: Yup.string(),\n  hour12: Yup.number(),\n  minute: Yup.number()\n});\nconst schemaEdit = Yup.object().shape({\n  name: Yup.string().required('Nome do relógio é obrigatório.'),\n  initial_read: Yup.number().positive().transform(emptyStringToNull).nullable().required('Leitura do relógio é obrigatória.')\n});\nconst clocksConfigs = [{\n  name: 'Gás',\n  value: 'GAS',\n  measurement: [{\n    name: 'quilograma',\n    value: 'KG'\n  }, {\n    name: 'metro cúbico (m³)',\n    value: 'M3'\n  }]\n}, {\n  name: 'Energia',\n  value: 'ELECTRICITY',\n  measurement: [{\n    name: 'quilowatt (kW)',\n    value: 'KW'\n  }]\n}, {\n  name: 'Água',\n  value: 'WATER',\n  measurement: [{\n    name: 'metro cúbico (m³)',\n    value: 'M3'\n  }]\n}];\nexport default function Relogios() {\n  const [loading, setLoading] = useState(false);\n  const [clocks, setClocks] = useState([]);\n  const [createModal, setCreateModal] = useState(false);\n  const [editModal, setEditModal] = useState(false);\n  const [getId, setId] = useState(); // eslint-disable-line\n\n  const [getItem, setItem] = useState();\n  const [initialData, setInitialData] = useState();\n  const clock = useSelector(state => state.clock);\n  console.log('clock state', clock);\n  const strClockType = clock.consumption.join();\n  const clockConfig = clocksConfigs.find(a => a.value === clock.consumption[0]);\n  const clockConfigMeasurement = clockConfig && clockConfig.measurement.map(item => {\n    return {\n      id: item.value,\n      title: item.name\n    };\n  });\n  const hotelID = useSelector(state => state.user.profile.activeHotel);\n  const hotelName = useSelector(state => state.user.profile.activeHotelName);\n  const loadClocks = useCallback(async () => {\n    try {\n      setLoading(true);\n      const response = await api.get(`/clocks`, {\n        params: {\n          hotel_id: hotelID,\n          clock_type: strClockType\n        }\n      });\n      const mapped = response.data.map(item => ({ ...item,\n        read_at_date: format(new Date(item.read_at_date), 'dd/MM/yyyy')\n      }));\n      setClocks(mapped);\n    } catch (error) {\n      toast.error('Não foi possível carregar relógios.');\n    }\n\n    setLoading(false);\n  }, [hotelID, strClockType]);\n  const buttonRef = useRef();\n  const buttonRefEdit = useRef();\n  useEffect(() => {\n    document.title = 'SIM - Consumo | Relógios';\n    loadClocks();\n  }, [loadClocks]);\n\n  function handleOpenAddModal() {\n    setCreateModal(true);\n  }\n\n  function handleCloseAddModal() {\n    setCreateModal(false);\n  }\n\n  async function getById(id) {\n    const response = await api.get(`/clocks/${id}`, {\n      params: {}\n    });\n    const {\n      data\n    } = response; // const hour = response.data.time.split(':')[0];\n    // const minute = response.data.time.split(':')[1];\n\n    setInitialData({ ...data,\n      read_at_date: parseISO(response.data.read_at_date)\n    });\n    setItem(response.data);\n  }\n\n  function handleOpenEditModal(id) {\n    setEditModal(true);\n    getById(id);\n  }\n\n  function handleCloseEditModal() {\n    setItem(null);\n    setEditModal(false);\n  }\n\n  async function handleSubmit(data) {\n    try {\n      const {\n        name,\n        hotel_id = Number(hotelID),\n        clock_type = strClockType,\n        initial_read,\n        read_at_date,\n        read_at_time,\n        read_unit_of_measurement\n      } = data;\n      await api.post('/clocks', {\n        name,\n        hotel_id,\n        clock_type,\n        initial_read,\n        read_at_date,\n        read_at_time,\n        read_unit_of_measurement\n      });\n      toast.success('Relógio cadastrado com sucesso.');\n      handleCloseAddModal();\n      loadClocks();\n    } catch (err) {\n      toast.error('Erro ao cadastrar relógio.');\n    }\n  }\n\n  async function handleEditClock(data) {\n    if (getItem.id) {\n      try {\n        const {\n          name,\n          clock_id = getItem.id,\n          initial_read\n        } = data;\n        await api.put(`/clocks`, {\n          name,\n          clock_id,\n          initial_read\n        });\n        toast.success('Relógio alterado com sucesso.');\n        handleCloseEditModal();\n        loadClocks();\n      } catch (err) {\n        toast.error('Erro ao editar relógio.');\n      }\n    }\n  }\n\n  async function handleDeleteClock(item) {\n    function deleteClock() {\n      try {\n        api.delete(`/clocks/${item.id}`);\n        toast.success('Relógio excluído com sucesso.');\n        setClocks(clocks.filter(currentClock => currentClock.id !== item.id));\n      } catch (err) {\n        toast.error('Não foi possível remover o relógio selecionado.');\n      }\n    }\n\n    confirmAlert({\n      customUI: ({\n        onClose\n      } // eslint-disable-line\n      ) => React.createElement(ConfirmAlert, {\n        callback: deleteClock,\n        onClose: onClose,\n        icon: React.createElement(Icon, {\n          name: \"iconTrash\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 255\n          },\n          __self: this\n        }),\n        title: \"Deletar rel\\xF3gio\",\n        message: React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 258\n          },\n          __self: this\n        }, \"Tem certeza que deseja deletar o rel\\xF3gio\", ' ', React.createElement(\"strong\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 260\n          },\n          __self: this\n        }, item.name), \" selecionado?\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252\n        },\n        __self: this\n      })\n    });\n  }\n\n  useEffect(() => {\n    const {\n      current\n    } = buttonRef;\n\n    if (current) {\n      console.log(buttonRef);\n\n      const handleFocus = () => current.style.opacity = '0.5';\n\n      const handleBlur = () => current.style.opacity = '1';\n\n      current.addEventListener('focusin', handleFocus);\n      current.addEventListener('blur', handleBlur);\n      return () => {\n        current.removeEventListener('focusin', handleFocus);\n        current.removeEventListener('blur', handleBlur);\n      };\n    }\n  }, [createModal, editModal]);\n  useEffect(() => {\n    if (buttonRefEdit.current) {\n      console.log('to aqui');\n    }\n  }, [editModal]);\n  return React.createElement(React.Fragment, null, createModal && React.createElement(Modal, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"modal__header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297\n    },\n    __self: this\n  }, \"Incluir rel\\xF3gio\"), React.createElement(\"button\", {\n    className: \"close\",\n    type: \"button\",\n    onClick: handleCloseAddModal,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 298\n    },\n    __self: this\n  }, React.createElement(Icon, {\n    name: \"iconDelete\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"modal__body\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"modal__group-info\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"modal__group-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308\n    },\n    __self: this\n  }, \"Empreendimento\"), React.createElement(\"span\", {\n    className: \"modal__group-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309\n    },\n    __self: this\n  }, hotelName)), clock.consumption.length > 0 && React.createElement(\"div\", {\n    className: \"modal__group-info\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"modal__group-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313\n    },\n    __self: this\n  }, \"Tipo\"), React.createElement(\"span\", {\n    className: \"modal__group-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 314\n    },\n    __self: this\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 315\n    },\n    __self: this\n  }, clockConfig.name))), React.createElement(Form, {\n    schema: schemaCreate,\n    onSubmit: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319\n    },\n    __self: this\n  }, clockConfig && React.createElement(\"div\", {\n    className: \"form__group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"read_unit_of_measurement\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 322\n    },\n    __self: this\n  }, \"Medida\", React.createElement(Select, {\n    className: \"form__input\",\n    name: \"read_unit_of_measurement\",\n    options: clockConfigMeasurement,\n    placeholder: \"Selecionar medida...\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 324\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form__group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 333\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 334\n    },\n    __self: this\n  }, \"Nome do rel\\xF3gio\", React.createElement(Input, {\n    className: \"form__input\",\n    name: \"name\",\n    type: \"text\",\n    id: \"name\",\n    placeholder: \"Informe o nome\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 336\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form__group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 345\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"initial_read\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 346\n    },\n    __self: this\n  }, \"Leitura\", React.createElement(Input, {\n    className: \"form__input\",\n    name: \"initial_read\",\n    type: \"number\",\n    id: \"initial_read\",\n    placeholder: \"Informe a leitura\",\n    step: \"0.01\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 348\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form__group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 358\n    },\n    __self: this\n  }, React.createElement(DatePickerInput, {\n    className: \"form__input\",\n    name: \"read_at_date\",\n    label: \"Data\" // disabled={loading}\n    ,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 359\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"form__group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 366\n    },\n    __self: this\n  }, React.createElement(TimePickerInput, {\n    name: \"read_at_time\",\n    label: \"Hora\",\n    format: \"HH:mm\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 367\n    },\n    __self: this\n  })), React.createElement(\"button\", {\n    ref: buttonRef,\n    className: \"btn btn-add\",\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 373\n    },\n    __self: this\n  }, \"Cadastrar rel\\xF3gio\")))), editModal && getItem && React.createElement(Modal, {\n    id: getId,\n    name: getItem.name,\n    initial_read: getItem.initial_read,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 382\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"modal__header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 387\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 388\n    },\n    __self: this\n  }, \"Editar rel\\xF3gio\"), React.createElement(\"button\", {\n    className: \"close\",\n    type: \"button\",\n    onClick: handleCloseEditModal,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 389\n    },\n    __self: this\n  }, React.createElement(Icon, {\n    name: \"iconDelete\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 394\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"modal__body\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 397\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"modal__group-info\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 398\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"modal__group-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 399\n    },\n    __self: this\n  }, \"Empreendimento\"), React.createElement(\"span\", {\n    className: \"modal__group-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 400\n    },\n    __self: this\n  }, hotelName)), React.createElement(\"div\", {\n    className: \"modal__group-info\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 402\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"modal__group-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 403\n    },\n    __self: this\n  }, \"Tipo\"), React.createElement(\"span\", {\n    className: \"modal__group-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 404\n    },\n    __self: this\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 405\n    },\n    __self: this\n  }, clockConfig.name))), React.createElement(Form, {\n    initialData: initialData,\n    schema: schemaEdit,\n    onSubmit: handleEditClock,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 408\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"form__group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 413\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 414\n    },\n    __self: this\n  }, \"Nome do rel\\xF3gio\", React.createElement(Input, {\n    className: \"form__input\",\n    name: \"name\",\n    type: \"text\",\n    id: \"name\",\n    placeholder: \"Informe o nome\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 416\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form__group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 425\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"initial_read\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 426\n    },\n    __self: this\n  }, \"Leitura\", React.createElement(Input, {\n    className: \"form__input\",\n    name: \"initial_read\",\n    type: \"number\",\n    id: \"initial_read\",\n    placeholder: \"Informe a leitura\",\n    step: \"0.01\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 428\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form__group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 438\n    },\n    __self: this\n  }, React.createElement(DatePickerInput, {\n    className: \"form__input\",\n    name: \"read_at_date\",\n    label: \"Data\",\n    disabled: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 439\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"form__group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 446\n    },\n    __self: this\n  }, React.createElement(TimePickerInput, {\n    name: \"read_at_time\",\n    label: \"Hora\",\n    disabled: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 447\n    },\n    __self: this\n  })), React.createElement(\"button\", {\n    ref: buttonRefEdit,\n    id: \"buttonRefEdit\",\n    className: \"btn btn-add\",\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 449\n    },\n    __self: this\n  }, \"Editar rel\\xF3gio\")))), !clocks.length && !loading ? React.createElement(StyledContainer, {\n    className: \"content empty\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 463\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"inner\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 464\n    },\n    __self: this\n  }, React.createElement(Icon, {\n    name: \"iconClockBig\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 465\n    },\n    __self: this\n  }), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 466\n    },\n    __self: this\n  }, \"Nenhum rel\\xF3gio do tipo\", ' ', React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 468\n    },\n    __self: this\n  }, clockConfig ? clockConfig.name : 'Todos'), ' ', \"encontrado.\"), React.createElement(\"button\", {\n    type: \"button\",\n    onClick: handleOpenAddModal,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 471\n    },\n    __self: this\n  }, React.createElement(Icon, {\n    name: \"iconClockSmall\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 472\n    },\n    __self: this\n  }), \"Cadastrar novo rel\\xF3gio\"))) : React.createElement(StyledContainer, {\n    className: \"content full\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 478\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"inner\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 479\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 480\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 481\n    },\n    __self: this\n  }, \"Rel\\xF3gios cadastrados\", ' ', React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 483\n    },\n    __self: this\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 484\n    },\n    __self: this\n  }, clockConfig ? clockConfig.name : 'Todos'))), React.createElement(\"button\", {\n    type: \"button\",\n    onClick: handleOpenAddModal,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 487\n    },\n    __self: this\n  }, React.createElement(Icon, {\n    name: \"iconPlus\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 488\n    },\n    __self: this\n  }), \"Cadastrar rel\\xF3gio\")), React.createElement(TableWrapper, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 492\n    },\n    __self: this\n  }, React.createElement(\"table\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 493\n    },\n    __self: this\n  }, React.createElement(\"thead\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 494\n    },\n    __self: this\n  }, React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 495\n    },\n    __self: this\n  }, React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 496\n    },\n    __self: this\n  }, \"Nome do rel\\xF3gio\"), React.createElement(\"th\", {\n    width: \"15%\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 497\n    },\n    __self: this\n  }, \"Unidade de medida\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 498\n    },\n    __self: this\n  }, \"Data\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 499\n    },\n    __self: this\n  }, \"Hora\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 500\n    },\n    __self: this\n  }, \"Leitura\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 501\n    },\n    __self: this\n  }, \"\\xA0\"))), React.createElement(\"tbody\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 504\n    },\n    __self: this\n  }, loading ? React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 506\n    },\n    __self: this\n  }, React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 507\n    },\n    __self: this\n  }, React.createElement(Shimmer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 508\n    },\n    __self: this\n  }, React.createElement(LoadLine, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 509\n    },\n    __self: this\n  }))), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 512\n    },\n    __self: this\n  }, React.createElement(Shimmer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 513\n    },\n    __self: this\n  }, React.createElement(LoadLine, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 514\n    },\n    __self: this\n  }))), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 517\n    },\n    __self: this\n  }, React.createElement(Shimmer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 518\n    },\n    __self: this\n  }, React.createElement(LoadLine, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 519\n    },\n    __self: this\n  }))), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 522\n    },\n    __self: this\n  }, React.createElement(Shimmer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 523\n    },\n    __self: this\n  }, React.createElement(LoadLine, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 524\n    },\n    __self: this\n  }))), React.createElement(\"td\", {\n    colSpan: \"2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 527\n    },\n    __self: this\n  }, React.createElement(Shimmer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 528\n    },\n    __self: this\n  }, React.createElement(LoadLine, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 529\n    },\n    __self: this\n  })))) : clocks.map(item => React.createElement(\"tr\", {\n    key: item.id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 535\n    },\n    __self: this\n  }, React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 536\n    },\n    __self: this\n  }, item.name), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 537\n    },\n    __self: this\n  }, item.read_unit_of_measurement_formatted), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 538\n    },\n    __self: this\n  }, item.read_at_date), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 539\n    },\n    __self: this\n  }, item.read_at_time), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 540\n    },\n    __self: this\n  }, item.initial_read), React.createElement(\"td\", {\n    width: \"75\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 541\n    },\n    __self: this\n  }, React.createElement(TableDropDownCustom, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 542\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    type: \"button\",\n    onClick: () => {\n      handleOpenEditModal(item.id);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 543\n    },\n    __self: this\n  }, \"Editar\"), React.createElement(\"button\", {\n    type: \"button\",\n    onClick: () => {\n      handleDeleteClock(item);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 551\n    },\n    __self: this\n  }, \"Excluir\")))))))))));\n}","map":{"version":3,"sources":["C:/Users/henriquet/Desktop/projetos/SIM_WEB/src/pages/Relogios/index.js"],"names":["React","useState","useEffect","useCallback","useRef","useLayoutEffect","forwardRef","useSelector","Yup","Shimmer","toast","format","parseISO","Form","Input","Select","confirmAlert","Icon","Modal","LoadLine","ConfirmAlert","DatePickerInput","TimePickerInput","TableDropDownCustom","StyledContainer","TableWrapper","api","emptyStringToNull","value","originalValue","schemaCreate","object","shape","name","string","required","initial_read","number","positive","transform","nullable","read_at_date","date","read_at_time","read_unit_of_measurement","hour12","minute","schemaEdit","clocksConfigs","measurement","Relogios","loading","setLoading","clocks","setClocks","createModal","setCreateModal","editModal","setEditModal","getId","setId","getItem","setItem","initialData","setInitialData","clock","state","console","log","strClockType","consumption","join","clockConfig","find","a","clockConfigMeasurement","map","item","id","title","hotelID","user","profile","activeHotel","hotelName","activeHotelName","loadClocks","response","get","params","hotel_id","clock_type","mapped","data","Date","error","buttonRef","buttonRefEdit","document","handleOpenAddModal","handleCloseAddModal","getById","handleOpenEditModal","handleCloseEditModal","handleSubmit","Number","post","success","err","handleEditClock","clock_id","put","handleDeleteClock","deleteClock","delete","filter","currentClock","customUI","onClose","current","handleFocus","style","opacity","handleBlur","addEventListener","removeEventListener","length","read_unit_of_measurement_formatted"],"mappings":"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","sourcesContent":["import React, {\n  useState,\n  useEffect,\n  useCallback,\n  useRef,\n  useLayoutEffect,\n  forwardRef,\n} from 'react';\nimport { useSelector } from 'react-redux';\n\nimport * as Yup from 'yup';\nimport Shimmer from 'react-shimmer-effect';\nimport { toast } from 'react-toastify';\nimport { format, parseISO } from 'date-fns';\nimport { Form, Input, Select } from '@rocketseat/unform';\nimport { confirmAlert } from 'react-confirm-alert';\nimport 'react-confirm-alert/src/react-confirm-alert.css';\n\nimport Icon from '../../components/Icons';\nimport Modal from '../../components/Modal';\nimport LoadLine from '../../components/LoadLine';\nimport ConfirmAlert from '../../components/ConfirmAlert';\nimport DatePickerInput from '../../components/DatePickerInput';\nimport TimePickerInput from '../../components/TimePickerInput';\n\nimport TableDropDownCustom from '../../components/TableDropDownCustom';\n\nimport { StyledContainer, TableWrapper } from './styles';\n\nimport api from '../../services/api';\n\nfunction emptyStringToNull(value, originalValue) {\n  if (typeof originalValue === 'string' && originalValue === '') {\n    return null;\n  }\n  return value;\n}\n\nconst schemaCreate = Yup.object().shape({\n  name: Yup.string().required('Nome do relógio é obrigatório.'),\n  initial_read: Yup.number()\n    .positive()\n    .transform(emptyStringToNull)\n    .nullable()\n    .required('Leitura do relógio é obrigatória.'),\n  read_at_date: Yup.date().required('Data é obrigatória.'),\n  read_at_time: Yup.string()\n    .transform(emptyStringToNull)\n    .nullable()\n    .required('Hora é obrigatória.'),\n  read_unit_of_measurement: Yup.string(),\n  hour12: Yup.number(),\n  minute: Yup.number(),\n});\n\nconst schemaEdit = Yup.object().shape({\n  name: Yup.string().required('Nome do relógio é obrigatório.'),\n  initial_read: Yup.number()\n    .positive()\n    .transform(emptyStringToNull)\n    .nullable()\n    .required('Leitura do relógio é obrigatória.'),\n});\n\nconst clocksConfigs = [\n  {\n    name: 'Gás',\n    value: 'GAS',\n    measurement: [\n      { name: 'quilograma', value: 'KG' },\n      { name: 'metro cúbico (m³)', value: 'M3' },\n    ],\n  },\n  {\n    name: 'Energia',\n    value: 'ELECTRICITY',\n    measurement: [{ name: 'quilowatt (kW)', value: 'KW' }],\n  },\n  {\n    name: 'Água',\n    value: 'WATER',\n    measurement: [{ name: 'metro cúbico (m³)', value: 'M3' }],\n  },\n];\n\nexport default function Relogios() {\n  const [loading, setLoading] = useState(false);\n  const [clocks, setClocks] = useState([]);\n  const [createModal, setCreateModal] = useState(false);\n  const [editModal, setEditModal] = useState(false);\n  const [getId, setId] = useState(); // eslint-disable-line\n  const [getItem, setItem] = useState();\n  const [initialData, setInitialData] = useState();\n\n  const clock = useSelector(state => state.clock);\n  console.log('clock state', clock);\n\n  const strClockType = clock.consumption.join();\n  const clockConfig = clocksConfigs.find(a => a.value === clock.consumption[0]);\n\n  const clockConfigMeasurement =\n    clockConfig &&\n    clockConfig.measurement.map(item => {\n      return {\n        id: item.value,\n        title: item.name,\n      };\n    });\n\n  const hotelID = useSelector(state => state.user.profile.activeHotel);\n  const hotelName = useSelector(state => state.user.profile.activeHotelName);\n\n  const loadClocks = useCallback(async () => {\n    try {\n      setLoading(true);\n\n      const response = await api.get(`/clocks`, {\n        params: {\n          hotel_id: hotelID,\n          clock_type: strClockType,\n        },\n      });\n\n      const mapped = response.data.map(item => ({\n        ...item,\n        read_at_date: format(new Date(item.read_at_date), 'dd/MM/yyyy'),\n      }));\n\n      setClocks(mapped);\n    } catch (error) {\n      toast.error('Não foi possível carregar relógios.');\n    }\n    setLoading(false);\n  }, [hotelID, strClockType]);\n\n  const buttonRef = useRef();\n  const buttonRefEdit = useRef();\n\n  useEffect(() => {\n    document.title = 'SIM - Consumo | Relógios';\n\n    loadClocks();\n  }, [loadClocks]);\n\n  function handleOpenAddModal() {\n    setCreateModal(true);\n  }\n\n  function handleCloseAddModal() {\n    setCreateModal(false);\n  }\n\n  async function getById(id) {\n    const response = await api.get(`/clocks/${id}`, {\n      params: {},\n    });\n\n    const { data } = response;\n\n    // const hour = response.data.time.split(':')[0];\n    // const minute = response.data.time.split(':')[1];\n\n    setInitialData({\n      ...data,\n      read_at_date: parseISO(response.data.read_at_date),\n    });\n\n    setItem(response.data);\n  }\n\n  function handleOpenEditModal(id) {\n    setEditModal(true);\n    getById(id);\n  }\n\n  function handleCloseEditModal() {\n    setItem(null);\n    setEditModal(false);\n  }\n\n  async function handleSubmit(data) {\n    try {\n      const {\n        name,\n        hotel_id = Number(hotelID),\n        clock_type = strClockType,\n        initial_read,\n        read_at_date,\n        read_at_time,\n        read_unit_of_measurement,\n      } = data;\n\n      await api.post('/clocks', {\n        name,\n        hotel_id,\n        clock_type,\n        initial_read,\n        read_at_date,\n        read_at_time,\n        read_unit_of_measurement,\n      });\n\n      toast.success('Relógio cadastrado com sucesso.');\n\n      handleCloseAddModal();\n\n      loadClocks();\n    } catch (err) {\n      toast.error('Erro ao cadastrar relógio.');\n    }\n  }\n\n  async function handleEditClock(data) {\n    if (getItem.id) {\n      try {\n        const { name, clock_id = getItem.id, initial_read } = data;\n\n        await api.put(`/clocks`, {\n          name,\n          clock_id,\n          initial_read,\n        });\n\n        toast.success('Relógio alterado com sucesso.');\n\n        handleCloseEditModal();\n\n        loadClocks();\n      } catch (err) {\n        toast.error('Erro ao editar relógio.');\n      }\n    }\n  }\n\n  async function handleDeleteClock(item) {\n    function deleteClock() {\n      try {\n        api.delete(`/clocks/${item.id}`);\n\n        toast.success('Relógio excluído com sucesso.');\n\n        setClocks(clocks.filter(currentClock => currentClock.id !== item.id));\n      } catch (err) {\n        toast.error('Não foi possível remover o relógio selecionado.');\n      }\n    }\n\n    confirmAlert({\n      customUI: (\n        { onClose } // eslint-disable-line\n      ) => (\n        <ConfirmAlert\n          callback={deleteClock}\n          onClose={onClose}\n          icon={<Icon name=\"iconTrash\" />}\n          title=\"Deletar relógio\"\n          message={\n            <p>\n              Tem certeza que deseja deletar o relógio{' '}\n              <strong>{item.name}</strong> selecionado?\n            </p>\n          }\n        />\n      ),\n    });\n  }\n\n  useEffect(() => {\n    const { current } = buttonRef;\n\n    if (current) {\n      console.log(buttonRef);\n      const handleFocus = () => (current.style.opacity = '0.5');\n      const handleBlur = () => (current.style.opacity = '1');\n\n      current.addEventListener('focusin', handleFocus);\n      current.addEventListener('blur', handleBlur);\n\n      return () => {\n        current.removeEventListener('focusin', handleFocus);\n        current.removeEventListener('blur', handleBlur);\n      };\n    }\n  }, [createModal, editModal]);\n\n  useEffect(() => {\n    if (buttonRefEdit.current) {\n      console.log('to aqui');\n    }\n  }, [editModal]);\n\n  return (\n    <>\n      {createModal && (\n        <Modal>\n          <div className=\"modal__header\">\n            <h3>Incluir relógio</h3>\n            <button\n              className=\"close\"\n              type=\"button\"\n              onClick={handleCloseAddModal}\n            >\n              <Icon name=\"iconDelete\" />\n            </button>\n          </div>\n          <div className=\"modal__body\">\n            <div className=\"modal__group-info\">\n              <p className=\"modal__group-title\">Empreendimento</p>\n              <span className=\"modal__group-text\">{hotelName}</span>\n            </div>\n            {clock.consumption.length > 0 && (\n              <div className=\"modal__group-info\">\n                <p className=\"modal__group-title\">Tipo</p>\n                <span className=\"modal__group-text\">\n                  <strong>{clockConfig.name}</strong>\n                </span>\n              </div>\n            )}\n            <Form schema={schemaCreate} onSubmit={handleSubmit}>\n              {clockConfig && (\n                <div className=\"form__group\">\n                  <label htmlFor=\"read_unit_of_measurement\">\n                    Medida\n                    <Select\n                      className=\"form__input\"\n                      name=\"read_unit_of_measurement\"\n                      options={clockConfigMeasurement}\n                      placeholder=\"Selecionar medida...\"\n                    />\n                  </label>\n                </div>\n              )}\n              <div className=\"form__group\">\n                <label htmlFor=\"name\">\n                  Nome do relógio\n                  <Input\n                    className=\"form__input\"\n                    name=\"name\"\n                    type=\"text\"\n                    id=\"name\"\n                    placeholder=\"Informe o nome\"\n                  />\n                </label>\n              </div>\n              <div className=\"form__group\">\n                <label htmlFor=\"initial_read\">\n                  Leitura\n                  <Input\n                    className=\"form__input\"\n                    name=\"initial_read\"\n                    type=\"number\"\n                    id=\"initial_read\"\n                    placeholder=\"Informe a leitura\"\n                    step=\"0.01\"\n                  />\n                </label>\n              </div>\n              <div className=\"form__group\">\n                <DatePickerInput\n                  className=\"form__input\"\n                  name=\"read_at_date\"\n                  label=\"Data\"\n                  // disabled={loading}\n                />\n              </div>\n              <div className=\"form__group\">\n                <TimePickerInput\n                  name=\"read_at_time\"\n                  label=\"Hora\"\n                  format=\"HH:mm\"\n                />\n              </div>\n              <button ref={buttonRef} className=\"btn btn-add\" type=\"submit\">\n                Cadastrar relógio\n              </button>\n            </Form>\n          </div>\n        </Modal>\n      )}\n\n      {editModal && getItem && (\n        <Modal\n          id={getId}\n          name={getItem.name}\n          initial_read={getItem.initial_read}\n        >\n          <div className=\"modal__header\">\n            <h3>Editar relógio</h3>\n            <button\n              className=\"close\"\n              type=\"button\"\n              onClick={handleCloseEditModal}\n            >\n              <Icon name=\"iconDelete\" />\n            </button>\n          </div>\n          <div className=\"modal__body\">\n            <div className=\"modal__group-info\">\n              <p className=\"modal__group-title\">Empreendimento</p>\n              <span className=\"modal__group-text\">{hotelName}</span>\n            </div>\n            <div className=\"modal__group-info\">\n              <p className=\"modal__group-title\">Tipo</p>\n              <span className=\"modal__group-text\">\n                <strong>{clockConfig.name}</strong>\n              </span>\n            </div>\n            <Form\n              initialData={initialData}\n              schema={schemaEdit}\n              onSubmit={handleEditClock}\n            >\n              <div className=\"form__group\">\n                <label htmlFor=\"name\">\n                  Nome do relógio\n                  <Input\n                    className=\"form__input\"\n                    name=\"name\"\n                    type=\"text\"\n                    id=\"name\"\n                    placeholder=\"Informe o nome\"\n                  />\n                </label>\n              </div>\n              <div className=\"form__group\">\n                <label htmlFor=\"initial_read\">\n                  Leitura\n                  <Input\n                    className=\"form__input\"\n                    name=\"initial_read\"\n                    type=\"number\"\n                    id=\"initial_read\"\n                    placeholder=\"Informe a leitura\"\n                    step=\"0.01\"\n                  />\n                </label>\n              </div>\n              <div className=\"form__group\">\n                <DatePickerInput\n                  className=\"form__input\"\n                  name=\"read_at_date\"\n                  label=\"Data\"\n                  disabled\n                />\n              </div>\n              <div className=\"form__group\">\n                <TimePickerInput name=\"read_at_time\" label=\"Hora\" disabled />\n              </div>\n              <button\n                ref={buttonRefEdit}\n                id=\"buttonRefEdit\"\n                className=\"btn btn-add\"\n                type=\"submit\"\n              >\n                Editar relógio\n              </button>\n            </Form>\n          </div>\n        </Modal>\n      )}\n\n      {!clocks.length && !loading ? (\n        <StyledContainer className=\"content empty\">\n          <div className=\"inner\">\n            <Icon name=\"iconClockBig\" />\n            <p>\n              Nenhum relógio do tipo{' '}\n              <strong>{clockConfig ? clockConfig.name : 'Todos'}</strong>{' '}\n              encontrado.\n            </p>\n            <button type=\"button\" onClick={handleOpenAddModal}>\n              <Icon name=\"iconClockSmall\" />\n              Cadastrar novo relógio\n            </button>\n          </div>\n        </StyledContainer>\n      ) : (\n        <StyledContainer className=\"content full\">\n          <div className=\"inner\">\n            <div className=\"title\">\n              <p>\n                Relógios cadastrados{' '}\n                <span>\n                  <strong>{clockConfig ? clockConfig.name : 'Todos'}</strong>\n                </span>\n              </p>\n              <button type=\"button\" onClick={handleOpenAddModal}>\n                <Icon name=\"iconPlus\" />\n                Cadastrar relógio\n              </button>\n            </div>\n            <TableWrapper>\n              <table>\n                <thead>\n                  <tr>\n                    <th>Nome do relógio</th>\n                    <th width=\"15%\">Unidade de medida</th>\n                    <th>Data</th>\n                    <th>Hora</th>\n                    <th>Leitura</th>\n                    <th>&nbsp;</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {loading ? (\n                    <tr>\n                      <td>\n                        <Shimmer>\n                          <LoadLine />\n                        </Shimmer>\n                      </td>\n                      <td>\n                        <Shimmer>\n                          <LoadLine />\n                        </Shimmer>\n                      </td>\n                      <td>\n                        <Shimmer>\n                          <LoadLine />\n                        </Shimmer>\n                      </td>\n                      <td>\n                        <Shimmer>\n                          <LoadLine />\n                        </Shimmer>\n                      </td>\n                      <td colSpan=\"2\">\n                        <Shimmer>\n                          <LoadLine />\n                        </Shimmer>\n                      </td>\n                    </tr>\n                  ) : (\n                    clocks.map(item => (\n                      <tr key={item.id}>\n                        <td>{item.name}</td>\n                        <td>{item.read_unit_of_measurement_formatted}</td>\n                        <td>{item.read_at_date}</td>\n                        <td>{item.read_at_time}</td>\n                        <td>{item.initial_read}</td>\n                        <td width=\"75\">\n                          <TableDropDownCustom>\n                            <button\n                              type=\"button\"\n                              onClick={() => {\n                                handleOpenEditModal(item.id);\n                              }}\n                            >\n                              Editar\n                            </button>\n                            <button\n                              type=\"button\"\n                              onClick={() => {\n                                handleDeleteClock(item);\n                              }}\n                            >\n                              Excluir\n                            </button>\n                          </TableDropDownCustom>\n                        </td>\n                      </tr>\n                    ))\n                  )}\n                </tbody>\n              </table>\n            </TableWrapper>\n          </div>\n        </StyledContainer>\n      )}\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}