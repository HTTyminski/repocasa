{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\henriquet\\\\Desktop\\\\projetos\\\\SIM_WEB\\\\src\\\\components\\\\CurrencyInput\\\\index.js\";\nimport React, { useState, useEffect, useMemo, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { useField } from '@rocketseat/unform';\nimport CurrencyInputWrapper from 'react-currency-input';\nimport { getCurrencySymbol } from '../../util/format';\nimport { CurrencyInputContainer } from './styles';\nconst schema = Yup.object().shape({\n  read: Yup.number().positive().transform(emptyStringToNull).nullable().required('Consumo é obrigatório.'),\n  value: Yup.number().positive().transform(emptyStringToNull).nullable().required('Valor é obrigatório.'),\n  attachment: Yup.mixed().nullable().transform(emptyStringToNull).required('Arquivo é obrigatório.')\n});\nexport default function CurrencyInput({\n  name,\n  label,\n  onChange,\n  ...rest\n}) {\n  const ref = useRef(null);\n  const {\n    fieldName,\n    registerField,\n    defaultValue,\n    error\n  } = useField(name);\n  const [amount, setAmount] = useState(defaultValue);\n  const currency = useMemo(() => getCurrencySymbol(), []);\n  useEffect(() => {\n    setAmount(defaultValue);\n  }, [defaultValue]);\n  useEffect(() => {\n    registerField({\n      name: fieldName,\n      ref: ref.current,\n      path: 'state.value'\n    });\n  }, [ref.current, fieldName]); // eslint-disable-line\n\n  return React.createElement(CurrencyInputContainer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: name,\n    maxLength: 3,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, label, React.createElement(CurrencyInputWrapper, Object.assign({\n    id: name,\n    name: name,\n    prefix: `${currency} `,\n    decimalSeparator: \",\",\n    thousandSeparator: \".\",\n    ref: ref,\n    value: amount,\n    onChange: onChange // maxLength={3}\n\n  }, rest, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  })), error && React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, error)));\n}\nCurrencyInput.propTypes = {\n  name: PropTypes.string.isRequired,\n  label: PropTypes.string,\n  onChange: PropTypes.func\n};\nCurrencyInput.defaultProps = {\n  label: null,\n  onChange: null\n};","map":{"version":3,"sources":["C:/Users/henriquet/Desktop/projetos/SIM_WEB/src/components/CurrencyInput/index.js"],"names":["React","useState","useEffect","useMemo","useRef","PropTypes","useField","CurrencyInputWrapper","getCurrencySymbol","CurrencyInputContainer","schema","Yup","object","shape","read","number","positive","transform","emptyStringToNull","nullable","required","value","attachment","mixed","CurrencyInput","name","label","onChange","rest","ref","fieldName","registerField","defaultValue","error","amount","setAmount","currency","current","path","propTypes","string","isRequired","func","defaultProps"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useMemo, useRef } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { useField } from '@rocketseat/unform';\nimport CurrencyInputWrapper from 'react-currency-input';\nimport { getCurrencySymbol } from '../../util/format';\n\nimport { CurrencyInputContainer } from './styles';\n\nconst schema = Yup.object().shape({\n  read: Yup.number()\n    .positive()\n    .transform(emptyStringToNull)\n    .nullable()\n    .required('Consumo é obrigatório.'),\n  value: Yup.number()\n    .positive()\n    .transform(emptyStringToNull)\n    .nullable()\n    .required('Valor é obrigatório.'),\n  attachment: Yup.mixed()\n    .nullable()\n    .transform(emptyStringToNull)\n    .required('Arquivo é obrigatório.'),\n});\n\n\nexport default function CurrencyInput({ name, label, onChange, ...rest }) {\n  const ref = useRef(null);\n  const { fieldName, registerField, defaultValue, error } = useField(name);\n\n  const [amount, setAmount] = useState(defaultValue);\n\n  const currency = useMemo(() => getCurrencySymbol(), []);\n\n  useEffect(() => {\n    setAmount(defaultValue);\n  }, [defaultValue]);\n\n  useEffect(() => {\n    registerField({\n      name: fieldName,\n      ref: ref.current,\n      path: 'state.value',\n    });\n  }, [ref.current, fieldName]); // eslint-disable-line\n\n  return (\n    <CurrencyInputContainer>\n      <label htmlFor={name} maxLength={3}>\n        {label}\n        <CurrencyInputWrapper\n          id={name}\n          name={name}\n          prefix={`${currency} `}\n          decimalSeparator=\",\"\n          thousandSeparator=\".\"\n          ref={ref}\n          value={amount}\n          onChange={onChange}\n          // maxLength={3}\n          {...rest}\n        />\n        {error && <span>{error}</span>}\n      </label>\n    </CurrencyInputContainer>\n  );\n}\n\nCurrencyInput.propTypes = {\n  name: PropTypes.string.isRequired,\n  label: PropTypes.string,\n  onChange: PropTypes.func,\n};\n\nCurrencyInput.defaultProps = {\n  label: null,\n  onChange: null,\n};\n"]},"metadata":{},"sourceType":"module"}