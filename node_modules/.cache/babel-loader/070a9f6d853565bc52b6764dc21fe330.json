{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\henriquet\\\\Desktop\\\\projetos\\\\SIM_WEB\\\\src\\\\pages\\\\LeituraConsumo\\\\components\\\\UhsPaxFormModal.js\";\nimport React from 'react';\nimport { useSelector } from 'react-redux';\nimport * as Yup from 'yup';\nimport { toast } from 'react-toastify';\nimport PropTypes from 'prop-types';\nimport { Form, Input } from '@rocketseat/unform';\nimport Icon from '../../../components/Icons';\nimport api from '../../../services/api';\n\nfunction emptyStringToNull(value, originalValue) {\n  if (typeof originalValue === 'string' && originalValue === '') {\n    return null;\n  }\n\n  return value;\n}\n\nconst schema = Yup.object().shape({\n  pax: Yup.number().positive().transform(emptyStringToNull).nullable().required('PAX é obrigatória.'),\n  uhs: Yup.number().positive().transform(emptyStringToNull).nullable().required('UHs é obrigatória.')\n});\nexport default function UhsPaxFormModal({\n  handleClose,\n  item,\n  loadOccupation\n}) {\n  console.log('Form data occupation', item); // eslint-disable-line\n\n  const hotelID = useSelector(state => state.user.profile.activeHotel);\n  const hotelName = useSelector(state => state.user.profile.activeHotelName);\n  const setDay = item.day;\n  const setMonth = item.month;\n  const setYear = item.year;\n  const formattedDate = `${setYear}/${setMonth}/${setDay}`;\n\n  async function handleSubmit(data) {\n    try {\n      await api.post(`/hotels/${hotelID}/occupations`, { ...data,\n        hotel_id: JSON.parse(hotelID),\n        date: new Date(formattedDate)\n      });\n      toast.success('UHs e PAX cadastrado com sucesso.');\n      handleClose();\n      loadOccupation();\n    } catch (error) {\n      toast.error('Erro ao adicionar.');\n    }\n  }\n\n  const buttonRef = useRef();\n  useEffect(() => {\n    const {\n      current\n    } = buttonRef;\n\n    const handleFocus = () => current.style.opacity = '0.8';\n\n    const handleBlur = () => current.style.opacity = '1';\n\n    current.addEventListener('focusin', handleFocus);\n    current.addEventListener('blur', handleBlur);\n    return () => {\n      current.removeEventListener('focusin', handleFocus);\n      current.removeEventListener('blur', handleBlur);\n    };\n  }, []);\n  return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n    className: \"modal__header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, \"Incluir UHs e PAX\"), React.createElement(\"button\", {\n    className: \"close\",\n    type: \"button\",\n    onClick: handleClose,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, React.createElement(Icon, {\n    name: \"iconDelete\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"modal__body\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"modal__group-info\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"modal__group-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, \"Empreendimento\"), React.createElement(\"span\", {\n    className: \"modal__group-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, hotelName)), React.createElement(\"div\", {\n    className: \"modal__group-info\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"modal__group-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, \"Data\"), React.createElement(\"span\", {\n    className: \"modal__group-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, setDay, \"/\", setMonth, \"/\", setYear)), React.createElement(Form, {\n    schema: schema,\n    onSubmit: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"form__group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"uhs\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, \"UHs\", React.createElement(Input, {\n    className: \"form__input\",\n    name: \"uhs\",\n    type: \"number\",\n    id: \"uhs\",\n    placeholder: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form__group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"pax\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, \"PAX\", React.createElement(Input, {\n    className: \"form__input\",\n    name: \"pax\",\n    type: \"number\",\n    id: \"pax\",\n    placeholder: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }))), React.createElement(\"button\", {\n    ref: buttonRef,\n    className: \"btn btn-add\",\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }, \"Incluir\"))));\n}\nUhsPaxFormModal.propTypes = {\n  handleClose: PropTypes.func.isRequired,\n  // item: PropTypes.number,\n  loadOccupation: PropTypes.func.isRequired\n};\nUhsPaxFormModal.defaultProps = {// item: null,\n};","map":{"version":3,"sources":["C:/Users/henriquet/Desktop/projetos/SIM_WEB/src/pages/LeituraConsumo/components/UhsPaxFormModal.js"],"names":["React","useSelector","Yup","toast","PropTypes","Form","Input","Icon","api","emptyStringToNull","value","originalValue","schema","object","shape","pax","number","positive","transform","nullable","required","uhs","UhsPaxFormModal","handleClose","item","loadOccupation","console","log","hotelID","state","user","profile","activeHotel","hotelName","activeHotelName","setDay","day","setMonth","month","setYear","year","formattedDate","handleSubmit","data","post","hotel_id","JSON","parse","date","Date","success","error","buttonRef","useRef","useEffect","current","handleFocus","style","opacity","handleBlur","addEventListener","removeEventListener","propTypes","func","isRequired","defaultProps"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { useSelector } from 'react-redux';\n\nimport * as Yup from 'yup';\nimport { toast } from 'react-toastify';\nimport PropTypes from 'prop-types';\nimport { Form, Input } from '@rocketseat/unform';\n\nimport Icon from '../../../components/Icons';\n\nimport api from '../../../services/api';\n\nfunction emptyStringToNull(value, originalValue) {\n  if (typeof originalValue === 'string' && originalValue === '') {\n    return null;\n  }\n  return value;\n}\n\nconst schema = Yup.object().shape({\n  pax: Yup.number()\n    .positive()\n    .transform(emptyStringToNull)\n    .nullable()\n    .required('PAX é obrigatória.'),\n  uhs: Yup.number()\n    .positive()\n    .transform(emptyStringToNull)\n    .nullable()\n    .required('UHs é obrigatória.'),\n});\n\nexport default function UhsPaxFormModal({ handleClose, item, loadOccupation }) {\n  console.log('Form data occupation', item); // eslint-disable-line\n\n  const hotelID = useSelector(state => state.user.profile.activeHotel);\n  const hotelName = useSelector(state => state.user.profile.activeHotelName);\n\n  const setDay = item.day;\n  const setMonth = item.month;\n  const setYear = item.year;\n  const formattedDate = `${setYear}/${setMonth}/${setDay}`;\n\n  async function handleSubmit(data) {\n    try {\n      await api.post(`/hotels/${hotelID}/occupations`, {\n        ...data,\n        hotel_id: JSON.parse(hotelID),\n        date: new Date(formattedDate),\n      });\n      toast.success('UHs e PAX cadastrado com sucesso.');\n      handleClose();\n      loadOccupation();\n    } catch (error) {\n      toast.error('Erro ao adicionar.');\n    }\n  }\n\n  const buttonRef = useRef();\n\n  useEffect(() => {\n    const { current } = buttonRef;\n\n    const handleFocus = () => (current.style.opacity = '0.8');\n    const handleBlur = () => (current.style.opacity = '1');\n\n    current.addEventListener('focusin', handleFocus);\n    current.addEventListener('blur', handleBlur);\n\n    return () => {\n      current.removeEventListener('focusin', handleFocus);\n      current.removeEventListener('blur', handleBlur);\n    };\n  }, []);\n\n  return (\n    <>\n      <div className=\"modal__header\">\n        <h3>Incluir UHs e PAX</h3>\n        <button className=\"close\" type=\"button\" onClick={handleClose}>\n          <Icon name=\"iconDelete\" />\n        </button>\n      </div>\n      <div className=\"modal__body\">\n        <div className=\"modal__group-info\">\n          <p className=\"modal__group-title\">Empreendimento</p>\n          <span className=\"modal__group-text\">{hotelName}</span>\n        </div>\n        <div className=\"modal__group-info\">\n          <p className=\"modal__group-title\">Data</p>\n          <span className=\"modal__group-text\">\n            {setDay}/{setMonth}/{setYear}\n          </span>\n        </div>\n        <Form schema={schema} onSubmit={handleSubmit}>\n          <div className=\"form__group\">\n            <label htmlFor=\"uhs\">\n              UHs\n              <Input\n                className=\"form__input\"\n                name=\"uhs\"\n                type=\"number\"\n                id=\"uhs\"\n                placeholder=\"\"\n              />\n            </label>\n          </div>\n          <div className=\"form__group\">\n            <label htmlFor=\"pax\">\n              PAX\n              <Input\n                className=\"form__input\"\n                name=\"pax\"\n                type=\"number\"\n                id=\"pax\"\n                placeholder=\"\"\n              />\n            </label>\n          </div>\n          <button ref={buttonRef}className=\"btn btn-add\" type=\"submit\">\n            Incluir\n          </button>\n        </Form>\n      </div>\n    </>\n  );\n}\n\nUhsPaxFormModal.propTypes = {\n  handleClose: PropTypes.func.isRequired,\n  // item: PropTypes.number,\n  loadOccupation: PropTypes.func.isRequired,\n};\n\nUhsPaxFormModal.defaultProps = {\n  // item: null,\n};\n"]},"metadata":{},"sourceType":"module"}