{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\henriquet\\\\Desktop\\\\projetos\\\\SIM_WEB\\\\src\\\\pages\\\\Relogios\\\\index.js\";\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { useSelector } from 'react-redux';\nimport * as Yup from 'yup';\nimport Shimmer from 'react-shimmer-effect';\nimport { toast } from 'react-toastify';\nimport { format, parseISO } from 'date-fns';\nimport { Form, Input, Select } from '@rocketseat/unform';\nimport { confirmAlert } from 'react-confirm-alert';\nimport 'react-confirm-alert/src/react-confirm-alert.css';\nimport Icon from '../../components/Icons';\nimport Modal from '../../components/Modal';\nimport LoadLine from '../../components/LoadLine';\nimport ConfirmAlert from '../../components/ConfirmAlert';\nimport DatePickerInput from '../../components/DatePickerInput';\nimport TimePickerInput from '../../components/TimePickerInput';\nimport TableDropDownCustom from '../../components/TableDropDownCustom';\nimport { StyledContainer, TableWrapper } from './styles';\nimport api from '../../services/api';\n\nfunction emptyStringToNull(value, originalValue) {\n  if (typeof originalValue === 'string' && originalValue === '') {\n    return null;\n  }\n\n  return value;\n}\n\nconst buttonRef = useRef(null);\nuseEffect(() => {\n  buttonRef.current.addEventListener('focus', function () {\n    document.getElementById('timePicker').setAttribute('style', 'opacity: 0.7');\n  });\n  buttonRef.current.addEventListener('blur', function () {\n    document.getElementById('button').removeAttribute('style', 'opacity: 0');\n  });\n}, []);\nconst schemaCreate = Yup.object().shape({\n  name: Yup.string().max(50, 'O nome deve ter no máximo 50 caracteres.').required('Nome do relógio é obrigatório.'),\n  initial_read: Yup.number().positive('O número deve ser maior que zero.').test('len', 'A Leitura dever ter no máximo 35 caracteres.', val => Math.ceil(Math.log10(val + 1)) <= 35).transform(emptyStringToNull).nullable().required('Leitura do relógio é obrigatória.'),\n  read_at_date: Yup.date().required('Data é obrigatória.'),\n  read_at_time: Yup.string().transform(emptyStringToNull).nullable().required('Hora é obrigatória.'),\n  read_unit_of_measurement: Yup.string(),\n  hour12: Yup.number(),\n  minute: Yup.number()\n});\nconst schemaEdit = Yup.object().shape({\n  name: Yup.string().required('Nome do relógio é obrigatório.'),\n  initial_read: Yup.number().positive('O número deve ser maior que zero.').transform(emptyStringToNull).nullable().required('Leitura do relógio é obrigatória.')\n});\nconst clocksConfigs = [{\n  name: 'Gás',\n  value: 'GAS',\n  measurement: [{\n    name: 'quilograma',\n    value: 'KG'\n  }, {\n    name: 'metro cúbico (m³)',\n    value: 'M3'\n  }]\n}, {\n  name: 'Energia',\n  value: 'ELECTRICITY',\n  measurement: [{\n    name: 'quilowatt (kW)',\n    value: 'KW'\n  }]\n}, {\n  name: 'Água',\n  value: 'WATER',\n  measurement: [{\n    name: 'metro cúbico (m³)',\n    value: 'M3'\n  }]\n}];\nexport default function Relogios() {\n  const [loading, setLoading] = useState(false);\n  const [clocks, setClocks] = useState([]);\n  const [createModal, setCreateModal] = useState(false);\n  const [editModal, setEditModal] = useState(false);\n  const [getId, setId] = useState(); // eslint-disable-line\n\n  const [getItem, setItem] = useState();\n  const [initialData, setInitialData] = useState();\n  const clock = useSelector(state => state.clock);\n  console.log('clock state', clock);\n  const strClockType = clock.consumption.join();\n  const clockConfig = clocksConfigs.find(a => a.value === clock.consumption[0]);\n  const clockConfigMeasurement = clockConfig && clockConfig.measurement.map(item => {\n    return {\n      id: item.value,\n      title: item.name\n    };\n  });\n  const hotelID = useSelector(state => state.user.profile.activeHotel);\n  const hotelName = useSelector(state => state.user.profile.activeHotelName);\n  const loadClocks = useCallback(async () => {\n    try {\n      setLoading(true);\n      const response = await api.get(`/clocks`, {\n        params: {\n          hotel_id: hotelID,\n          clock_type: strClockType\n        }\n      });\n      const mapped = response.data.map(item => ({ ...item,\n        read_at_date: format(new Date(item.read_at_date), 'dd/MM/yyyy')\n      }));\n      setClocks(mapped);\n    } catch (error) {\n      toast.error('Não foi possível carregar relógios.');\n    }\n\n    setLoading(false);\n  }, [hotelID, strClockType]);\n  useEffect(() => {\n    document.title = 'SIM - Consumo | Relógios';\n    loadClocks();\n  }, [loadClocks]);\n\n  function handleOpenAddModal() {\n    setCreateModal(true);\n  }\n\n  function handleCloseAddModal() {\n    setCreateModal(false);\n  }\n\n  async function getById(id) {\n    const response = await api.get(`/clocks/${id}`, {\n      params: {}\n    });\n    const {\n      data\n    } = response; // const hour = response.data.time.split(':')[0];\n    // const minute = response.data.time.split(':')[1];\n\n    setInitialData({ ...data,\n      read_at_date: parseISO(response.data.read_at_date)\n    });\n    setItem(response.data);\n  }\n\n  function handleOpenEditModal(id) {\n    setEditModal(true);\n    getById(id);\n  }\n\n  function handleCloseEditModal() {\n    setItem(null);\n    setEditModal(false);\n  }\n\n  async function handleSubmit(data) {\n    try {\n      const {\n        name,\n        hotel_id = Number(hotelID),\n        clock_type = strClockType,\n        initial_read,\n        read_at_date,\n        read_at_time,\n        read_unit_of_measurement\n      } = data;\n      const resultAdd = await api.post('/clocks', {\n        name,\n        hotel_id,\n        clock_type,\n        initial_read,\n        read_at_date,\n        read_at_time,\n        read_unit_of_measurement\n      });\n      console.log('resultAdd: ', resultAdd);\n      toast.success('Relógio cadastrado com sucesso.');\n      handleCloseAddModal();\n      loadClocks();\n    } catch (error) {\n      if (error.response && error.response.data.errors) {\n        if (error.response.data.errors[0] === 'There is already a Clock with the name and type informed') {\n          toast.error('Já existe um relógio com este nome e mesmo tipo de medida.');\n        } else {\n          toast.error(error.response.data.errors[0]);\n        }\n      } else {\n        toast.error('Erro ao cadastrar relógio.');\n      }\n    }\n  }\n\n  async function handleEditClock(data) {\n    if (getItem.id) {\n      try {\n        const {\n          name,\n          clock_id = getItem.id,\n          initial_read\n        } = data;\n        await api.put(`/clocks`, {\n          name,\n          clock_id,\n          initial_read\n        });\n        toast.success('Relógio alterado com sucesso.');\n        handleCloseEditModal();\n        loadClocks();\n      } catch (err) {\n        toast.error('Erro ao editar relógio.');\n      }\n    }\n  }\n\n  async function handleDeleteClock(item) {\n    function deleteClock() {\n      try {\n        api.delete(`/clocks/${item.id}`);\n        toast.success('Relógio excluído com sucesso.');\n        setClocks(clocks.filter(currentClock => currentClock.id !== item.id));\n      } catch (err) {\n        toast.error('Não foi possível remover o relógio selecionado.');\n      }\n    }\n\n    confirmAlert({\n      customUI: ({\n        onClose\n      } // eslint-disable-line\n      ) => React.createElement(ConfirmAlert, {\n        callback: deleteClock,\n        onClose: onClose,\n        icon: React.createElement(Icon, {\n          name: \"iconTrash\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 278\n          },\n          __self: this\n        }),\n        title: \"Deletar rel\\xF3gio\",\n        message: React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 281\n          },\n          __self: this\n        }, \"Tem certeza que deseja deletar o rel\\xF3gio\", ' ', React.createElement(\"strong\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 283\n          },\n          __self: this\n        }, item.name), \" selecionado?\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275\n        },\n        __self: this\n      })\n    });\n  }\n\n  return React.createElement(React.Fragment, null, createModal && React.createElement(Modal, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"modal__header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296\n    },\n    __self: this\n  }, \"Incluir rel\\xF3gio\"), React.createElement(\"button\", {\n    className: \"close\",\n    type: \"button\",\n    onClick: handleCloseAddModal,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297\n    },\n    __self: this\n  }, React.createElement(Icon, {\n    name: \"iconDelete\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"modal__body\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 305\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"modal__group-info\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"modal__group-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307\n    },\n    __self: this\n  }, \"Empreendimento\"), React.createElement(\"span\", {\n    className: \"modal__group-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308\n    },\n    __self: this\n  }, hotelName)), clock.consumption.length > 0 && React.createElement(\"div\", {\n    className: \"modal__group-info\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"modal__group-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312\n    },\n    __self: this\n  }, \"Tipo\"), React.createElement(\"span\", {\n    className: \"modal__group-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313\n    },\n    __self: this\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 314\n    },\n    __self: this\n  }, clockConfig.name))), React.createElement(Form, {\n    schema: schemaCreate,\n    onSubmit: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318\n    },\n    __self: this\n  }, clockConfig && React.createElement(\"div\", {\n    className: \"form__group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"read_unit_of_measurement\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321\n    },\n    __self: this\n  }, \"Medida\", React.createElement(Select, {\n    className: \"form__input\",\n    name: \"read_unit_of_measurement\",\n    options: clockConfigMeasurement,\n    placeholder: \"Selecionar medida...\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 323\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form__group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 332\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 333\n    },\n    __self: this\n  }, \"Nome do rel\\xF3gio\", React.createElement(Input, {\n    className: \"form__input\",\n    name: \"name\",\n    type: \"text\",\n    id: \"name\",\n    placeholder: \"Informe o nome\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 335\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form__group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 344\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"initial_read\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 345\n    },\n    __self: this\n  }, \"Leitura\", React.createElement(Input, {\n    className: \"form__input\",\n    name: \"initial_read\",\n    type: \"number\",\n    id: \"initial_read\",\n    placeholder: \"Informe a leitura\",\n    step: \"0.01\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 347\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form__group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 357\n    },\n    __self: this\n  }, React.createElement(DatePickerInput, {\n    className: \"form__input\",\n    name: \"read_at_date\",\n    label: \"Data\" // disabled={loading}\n    ,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 358\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"form__group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 365\n    },\n    __self: this\n  }, React.createElement(TimePickerInput, {\n    id: \"timePicker\",\n    name: \"read_at_time\",\n    label: \"Hora\",\n    format: \"HH:mm\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 366\n    },\n    __self: this\n  })), React.createElement(\"button\", {\n    id: \"income\",\n    className: \"btn btn-add\",\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 373\n    },\n    __self: this\n  }, \"Cadastrar rel\\xF3gio\")))), editModal && getItem && React.createElement(Modal, {\n    id: getId,\n    name: getItem.name,\n    initial_read: getItem.initial_read,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 382\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"modal__header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 387\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 388\n    },\n    __self: this\n  }, \"Editar rel\\xF3gio\"), React.createElement(\"button\", {\n    className: \"close\",\n    type: \"button\",\n    onClick: handleCloseEditModal,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 389\n    },\n    __self: this\n  }, React.createElement(Icon, {\n    name: \"iconDelete\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 394\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"modal__body\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 397\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"modal__group-info\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 398\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"modal__group-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 399\n    },\n    __self: this\n  }, \"Empreendimento\"), React.createElement(\"span\", {\n    className: \"modal__group-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 400\n    },\n    __self: this\n  }, hotelName)), React.createElement(\"div\", {\n    className: \"modal__group-info\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 402\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"modal__group-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 403\n    },\n    __self: this\n  }, \"Tipo\"), React.createElement(\"span\", {\n    className: \"modal__group-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 404\n    },\n    __self: this\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 405\n    },\n    __self: this\n  }, clockConfig.name))), React.createElement(Form, {\n    initialData: initialData,\n    schema: schemaEdit,\n    onSubmit: handleEditClock,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 408\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"form__group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 413\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 414\n    },\n    __self: this\n  }, \"Nome do rel\\xF3gio\", React.createElement(Input, {\n    className: \"form__input\",\n    name: \"name\",\n    type: \"text\",\n    id: \"name\",\n    placeholder: \"Informe o nome\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 416\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form__group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 425\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"initial_read\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 426\n    },\n    __self: this\n  }, \"Leitura\", React.createElement(Input, {\n    className: \"form__input\",\n    name: \"initial_read\",\n    type: \"number\",\n    id: \"initial_read\",\n    placeholder: \"Informe a leitura\",\n    step: \"0.01\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 428\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form__group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 438\n    },\n    __self: this\n  }, React.createElement(DatePickerInput, {\n    className: \"form__input\",\n    name: \"read_at_date\",\n    label: \"Data\",\n    disabled: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 439\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"form__group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 446\n    },\n    __self: this\n  }, React.createElement(TimePickerInput, {\n    name: \"read_at_time\",\n    label: \"Hora\",\n    disabled: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 447\n    },\n    __self: this\n  })), React.createElement(\"button\", {\n    className: \"btn btn-add\",\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 449\n    },\n    __self: this\n  }, \"Editar rel\\xF3gio\")))), !clocks.length && !loading ? React.createElement(StyledContainer, {\n    className: \"content empty\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 458\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"inner\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 459\n    },\n    __self: this\n  }, React.createElement(Icon, {\n    name: \"iconClockBig\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 460\n    },\n    __self: this\n  }), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 461\n    },\n    __self: this\n  }, \"Nenhum rel\\xF3gio do tipo\", ' ', React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 463\n    },\n    __self: this\n  }, clockConfig ? clockConfig.name : 'Todos'), ' ', \"encontrado.\"), React.createElement(\"button\", {\n    type: \"button\",\n    onClick: handleOpenAddModal,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 466\n    },\n    __self: this\n  }, React.createElement(Icon, {\n    name: \"iconClockSmall\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 467\n    },\n    __self: this\n  }), \"Cadastrar novo rel\\xF3gio\"))) : React.createElement(StyledContainer, {\n    className: \"content full\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 473\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"inner\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 474\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 475\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 476\n    },\n    __self: this\n  }, \"Rel\\xF3gios cadastrados\", ' ', React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 478\n    },\n    __self: this\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 479\n    },\n    __self: this\n  }, clockConfig ? clockConfig.name : 'Todos'))), React.createElement(\"button\", {\n    type: \"button\",\n    onClick: handleOpenAddModal,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 482\n    },\n    __self: this\n  }, React.createElement(Icon, {\n    name: \"iconPlus\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 483\n    },\n    __self: this\n  }), \"Cadastrar rel\\xF3gio\")), React.createElement(TableWrapper, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 487\n    },\n    __self: this\n  }, React.createElement(\"table\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 488\n    },\n    __self: this\n  }, React.createElement(\"thead\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 489\n    },\n    __self: this\n  }, React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 490\n    },\n    __self: this\n  }, React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 491\n    },\n    __self: this\n  }, \"Nome do rel\\xF3gio\"), React.createElement(\"th\", {\n    width: \"15%\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 492\n    },\n    __self: this\n  }, \"Unidade de medida\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 493\n    },\n    __self: this\n  }, \"Data\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 494\n    },\n    __self: this\n  }, \"Hora\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 495\n    },\n    __self: this\n  }, \"Leitura\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 496\n    },\n    __self: this\n  }, \"\\xA0\"))), React.createElement(\"tbody\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 499\n    },\n    __self: this\n  }, loading ? React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 501\n    },\n    __self: this\n  }, React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 502\n    },\n    __self: this\n  }, React.createElement(Shimmer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 503\n    },\n    __self: this\n  }, React.createElement(LoadLine, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 504\n    },\n    __self: this\n  }))), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 507\n    },\n    __self: this\n  }, React.createElement(Shimmer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 508\n    },\n    __self: this\n  }, React.createElement(LoadLine, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 509\n    },\n    __self: this\n  }))), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 512\n    },\n    __self: this\n  }, React.createElement(Shimmer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 513\n    },\n    __self: this\n  }, React.createElement(LoadLine, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 514\n    },\n    __self: this\n  }))), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 517\n    },\n    __self: this\n  }, React.createElement(Shimmer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 518\n    },\n    __self: this\n  }, React.createElement(LoadLine, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 519\n    },\n    __self: this\n  }))), React.createElement(\"td\", {\n    colSpan: \"2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 522\n    },\n    __self: this\n  }, React.createElement(Shimmer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 523\n    },\n    __self: this\n  }, React.createElement(LoadLine, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 524\n    },\n    __self: this\n  })))) : clocks.map(item => React.createElement(\"tr\", {\n    key: item.id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 530\n    },\n    __self: this\n  }, React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 531\n    },\n    __self: this\n  }, item.name), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 532\n    },\n    __self: this\n  }, item.read_unit_of_measurement_formatted), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 533\n    },\n    __self: this\n  }, item.read_at_date), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 534\n    },\n    __self: this\n  }, item.read_at_time), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 535\n    },\n    __self: this\n  }, item.initial_read), React.createElement(\"td\", {\n    width: \"75\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 536\n    },\n    __self: this\n  }, React.createElement(TableDropDownCustom, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 537\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    type: \"button\",\n    onClick: () => {\n      handleOpenEditModal(item.id);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 538\n    },\n    __self: this\n  }, \"Editar\"), React.createElement(\"button\", {\n    type: \"button\",\n    onClick: () => {\n      handleDeleteClock(item);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 546\n    },\n    __self: this\n  }, \"Excluir\")))))))))));\n}","map":{"version":3,"sources":["C:/Users/henriquet/Desktop/projetos/SIM_WEB/src/pages/Relogios/index.js"],"names":["React","useState","useEffect","useCallback","useRef","useSelector","Yup","Shimmer","toast","format","parseISO","Form","Input","Select","confirmAlert","Icon","Modal","LoadLine","ConfirmAlert","DatePickerInput","TimePickerInput","TableDropDownCustom","StyledContainer","TableWrapper","api","emptyStringToNull","value","originalValue","buttonRef","current","addEventListener","document","getElementById","setAttribute","removeAttribute","schemaCreate","object","shape","name","string","max","required","initial_read","number","positive","test","val","Math","ceil","log10","transform","nullable","read_at_date","date","read_at_time","read_unit_of_measurement","hour12","minute","schemaEdit","clocksConfigs","measurement","Relogios","loading","setLoading","clocks","setClocks","createModal","setCreateModal","editModal","setEditModal","getId","setId","getItem","setItem","initialData","setInitialData","clock","state","console","log","strClockType","consumption","join","clockConfig","find","a","clockConfigMeasurement","map","item","id","title","hotelID","user","profile","activeHotel","hotelName","activeHotelName","loadClocks","response","get","params","hotel_id","clock_type","mapped","data","Date","error","handleOpenAddModal","handleCloseAddModal","getById","handleOpenEditModal","handleCloseEditModal","handleSubmit","Number","resultAdd","post","success","errors","handleEditClock","clock_id","put","err","handleDeleteClock","deleteClock","delete","filter","currentClock","customUI","onClose","length","read_unit_of_measurement_formatted"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport * as Yup from 'yup';\nimport Shimmer from 'react-shimmer-effect';\nimport { toast } from 'react-toastify';\nimport { format, parseISO } from 'date-fns';\nimport { Form, Input, Select } from '@rocketseat/unform';\nimport { confirmAlert } from 'react-confirm-alert';\nimport 'react-confirm-alert/src/react-confirm-alert.css';\n\nimport Icon from '../../components/Icons';\nimport Modal from '../../components/Modal';\nimport LoadLine from '../../components/LoadLine';\nimport ConfirmAlert from '../../components/ConfirmAlert';\nimport DatePickerInput from '../../components/DatePickerInput';\nimport TimePickerInput from '../../components/TimePickerInput';\n\nimport TableDropDownCustom from '../../components/TableDropDownCustom';\n\nimport { StyledContainer, TableWrapper } from './styles';\n\nimport api from '../../services/api';\n\nfunction emptyStringToNull(value, originalValue) {\n  if (typeof originalValue === 'string' && originalValue === '') {\n    return null;\n  }\n  return value;\n}\n\nconst buttonRef = useRef(null);\n\nuseEffect(() => {\n  buttonRef.current.addEventListener('focus', function() {\n    document.getElementById('timePicker').setAttribute('style', 'opacity: 0.7');\n  });\n  buttonRef.current.addEventListener('blur', function() {\n    document.getElementById('button').removeAttribute('style', 'opacity: 0');\n  });\n}, []);\n\nconst schemaCreate = Yup.object().shape({\n  name: Yup.string()\n    .max(50, 'O nome deve ter no máximo 50 caracteres.')\n    .required('Nome do relógio é obrigatório.'),\n  initial_read: Yup.number()\n    .positive('O número deve ser maior que zero.')\n    .test(\n      'len',\n      'A Leitura dever ter no máximo 35 caracteres.',\n      val => Math.ceil(Math.log10(val + 1)) <= 35\n    )\n    .transform(emptyStringToNull)\n    .nullable()\n    .required('Leitura do relógio é obrigatória.'),\n  read_at_date: Yup.date().required('Data é obrigatória.'),\n  read_at_time: Yup.string()\n    .transform(emptyStringToNull)\n    .nullable()\n    .required('Hora é obrigatória.'),\n  read_unit_of_measurement: Yup.string(),\n  hour12: Yup.number(),\n  minute: Yup.number(),\n});\n\nconst schemaEdit = Yup.object().shape({\n  name: Yup.string().required('Nome do relógio é obrigatório.'),\n  initial_read: Yup.number()\n    .positive('O número deve ser maior que zero.')\n    .transform(emptyStringToNull)\n    .nullable()\n    .required('Leitura do relógio é obrigatória.'),\n});\n\nconst clocksConfigs = [\n  {\n    name: 'Gás',\n    value: 'GAS',\n    measurement: [\n      { name: 'quilograma', value: 'KG' },\n      { name: 'metro cúbico (m³)', value: 'M3' },\n    ],\n  },\n  {\n    name: 'Energia',\n    value: 'ELECTRICITY',\n    measurement: [{ name: 'quilowatt (kW)', value: 'KW' }],\n  },\n  {\n    name: 'Água',\n    value: 'WATER',\n    measurement: [{ name: 'metro cúbico (m³)', value: 'M3' }],\n  },\n];\n\nexport default function Relogios() {\n  const [loading, setLoading] = useState(false);\n  const [clocks, setClocks] = useState([]);\n  const [createModal, setCreateModal] = useState(false);\n  const [editModal, setEditModal] = useState(false);\n  const [getId, setId] = useState(); // eslint-disable-line\n  const [getItem, setItem] = useState();\n  const [initialData, setInitialData] = useState();\n\n  const clock = useSelector(state => state.clock);\n  console.log('clock state', clock);\n\n  const strClockType = clock.consumption.join();\n  const clockConfig = clocksConfigs.find(a => a.value === clock.consumption[0]);\n\n  const clockConfigMeasurement =\n    clockConfig &&\n    clockConfig.measurement.map(item => {\n      return {\n        id: item.value,\n        title: item.name,\n      };\n    });\n\n  const hotelID = useSelector(state => state.user.profile.activeHotel);\n  const hotelName = useSelector(state => state.user.profile.activeHotelName);\n\n  const loadClocks = useCallback(async () => {\n    try {\n      setLoading(true);\n\n      const response = await api.get(`/clocks`, {\n        params: {\n          hotel_id: hotelID,\n          clock_type: strClockType,\n        },\n      });\n\n      const mapped = response.data.map(item => ({\n        ...item,\n        read_at_date: format(new Date(item.read_at_date), 'dd/MM/yyyy'),\n      }));\n\n      setClocks(mapped);\n    } catch (error) {\n      toast.error('Não foi possível carregar relógios.');\n    }\n    setLoading(false);\n  }, [hotelID, strClockType]);\n\n  useEffect(() => {\n    document.title = 'SIM - Consumo | Relógios';\n\n    loadClocks();\n  }, [loadClocks]);\n\n  function handleOpenAddModal() {\n    setCreateModal(true);\n  }\n\n  function handleCloseAddModal() {\n    setCreateModal(false);\n  }\n\n  async function getById(id) {\n    const response = await api.get(`/clocks/${id}`, {\n      params: {},\n    });\n\n    const { data } = response;\n\n    // const hour = response.data.time.split(':')[0];\n    // const minute = response.data.time.split(':')[1];\n\n    setInitialData({\n      ...data,\n      read_at_date: parseISO(response.data.read_at_date),\n    });\n\n    setItem(response.data);\n  }\n\n  function handleOpenEditModal(id) {\n    setEditModal(true);\n    getById(id);\n  }\n\n  function handleCloseEditModal() {\n    setItem(null);\n    setEditModal(false);\n  }\n\n  async function handleSubmit(data) {\n    try {\n      const {\n        name,\n        hotel_id = Number(hotelID),\n        clock_type = strClockType,\n        initial_read,\n        read_at_date,\n        read_at_time,\n        read_unit_of_measurement,\n      } = data;\n\n      const resultAdd = await api.post('/clocks', {\n        name,\n        hotel_id,\n        clock_type,\n        initial_read,\n        read_at_date,\n        read_at_time,\n        read_unit_of_measurement,\n      });\n\n      console.log('resultAdd: ', resultAdd);\n\n      toast.success('Relógio cadastrado com sucesso.');\n\n      handleCloseAddModal();\n\n      loadClocks();\n    } catch (error) {\n      if (error.response && error.response.data.errors) {\n        if (\n          error.response.data.errors[0] ===\n          'There is already a Clock with the name and type informed'\n        ) {\n          toast.error(\n            'Já existe um relógio com este nome e mesmo tipo de medida.'\n          );\n        } else {\n          toast.error(error.response.data.errors[0]);\n        }\n      } else {\n        toast.error('Erro ao cadastrar relógio.');\n      }\n    }\n  }\n\n  async function handleEditClock(data) {\n    if (getItem.id) {\n      try {\n        const { name, clock_id = getItem.id, initial_read } = data;\n\n        await api.put(`/clocks`, {\n          name,\n          clock_id,\n          initial_read,\n        });\n\n        toast.success('Relógio alterado com sucesso.');\n\n        handleCloseEditModal();\n\n        loadClocks();\n      } catch (err) {\n        toast.error('Erro ao editar relógio.');\n      }\n    }\n  }\n\n  async function handleDeleteClock(item) {\n    function deleteClock() {\n      try {\n        api.delete(`/clocks/${item.id}`);\n\n        toast.success('Relógio excluído com sucesso.');\n\n        setClocks(clocks.filter(currentClock => currentClock.id !== item.id));\n      } catch (err) {\n        toast.error('Não foi possível remover o relógio selecionado.');\n      }\n    }\n\n    confirmAlert({\n      customUI: (\n        { onClose } // eslint-disable-line\n      ) => (\n        <ConfirmAlert\n          callback={deleteClock}\n          onClose={onClose}\n          icon={<Icon name=\"iconTrash\" />}\n          title=\"Deletar relógio\"\n          message={\n            <p>\n              Tem certeza que deseja deletar o relógio{' '}\n              <strong>{item.name}</strong> selecionado?\n            </p>\n          }\n        />\n      ),\n    });\n  }\n\n  return (\n    <>\n      {createModal && (\n        <Modal>\n          <div className=\"modal__header\">\n            <h3>Incluir relógio</h3>\n            <button\n              className=\"close\"\n              type=\"button\"\n              onClick={handleCloseAddModal}\n            >\n              <Icon name=\"iconDelete\" />\n            </button>\n          </div>\n          <div className=\"modal__body\">\n            <div className=\"modal__group-info\">\n              <p className=\"modal__group-title\">Empreendimento</p>\n              <span className=\"modal__group-text\">{hotelName}</span>\n            </div>\n            {clock.consumption.length > 0 && (\n              <div className=\"modal__group-info\">\n                <p className=\"modal__group-title\">Tipo</p>\n                <span className=\"modal__group-text\">\n                  <strong>{clockConfig.name}</strong>\n                </span>\n              </div>\n            )}\n            <Form schema={schemaCreate} onSubmit={handleSubmit}>\n              {clockConfig && (\n                <div className=\"form__group\">\n                  <label htmlFor=\"read_unit_of_measurement\">\n                    Medida\n                    <Select\n                      className=\"form__input\"\n                      name=\"read_unit_of_measurement\"\n                      options={clockConfigMeasurement}\n                      placeholder=\"Selecionar medida...\"\n                    />\n                  </label>\n                </div>\n              )}\n              <div className=\"form__group\">\n                <label htmlFor=\"name\">\n                  Nome do relógio\n                  <Input\n                    className=\"form__input\"\n                    name=\"name\"\n                    type=\"text\"\n                    id=\"name\"\n                    placeholder=\"Informe o nome\"\n                  />\n                </label>\n              </div>\n              <div className=\"form__group\">\n                <label htmlFor=\"initial_read\">\n                  Leitura\n                  <Input\n                    className=\"form__input\"\n                    name=\"initial_read\"\n                    type=\"number\"\n                    id=\"initial_read\"\n                    placeholder=\"Informe a leitura\"\n                    step=\"0.01\"\n                  />\n                </label>\n              </div>\n              <div className=\"form__group\">\n                <DatePickerInput\n                  className=\"form__input\"\n                  name=\"read_at_date\"\n                  label=\"Data\"\n                  // disabled={loading}\n                />\n              </div>\n              <div className=\"form__group\">\n                <TimePickerInput\n                  id=\"timePicker\"\n                  name=\"read_at_time\"\n                  label=\"Hora\"\n                  format=\"HH:mm\"\n                />\n              </div>\n              <button id=\"income\" className=\"btn btn-add\" type=\"submit\">\n                Cadastrar relógio\n              </button>\n            </Form>\n          </div>\n        </Modal>\n      )}\n\n      {editModal && getItem && (\n        <Modal\n          id={getId}\n          name={getItem.name}\n          initial_read={getItem.initial_read}\n        >\n          <div className=\"modal__header\">\n            <h3>Editar relógio</h3>\n            <button\n              className=\"close\"\n              type=\"button\"\n              onClick={handleCloseEditModal}\n            >\n              <Icon name=\"iconDelete\" />\n            </button>\n          </div>\n          <div className=\"modal__body\">\n            <div className=\"modal__group-info\">\n              <p className=\"modal__group-title\">Empreendimento</p>\n              <span className=\"modal__group-text\">{hotelName}</span>\n            </div>\n            <div className=\"modal__group-info\">\n              <p className=\"modal__group-title\">Tipo</p>\n              <span className=\"modal__group-text\">\n                <strong>{clockConfig.name}</strong>\n              </span>\n            </div>\n            <Form\n              initialData={initialData}\n              schema={schemaEdit}\n              onSubmit={handleEditClock}\n            >\n              <div className=\"form__group\">\n                <label htmlFor=\"name\">\n                  Nome do relógio\n                  <Input\n                    className=\"form__input\"\n                    name=\"name\"\n                    type=\"text\"\n                    id=\"name\"\n                    placeholder=\"Informe o nome\"\n                  />\n                </label>\n              </div>\n              <div className=\"form__group\">\n                <label htmlFor=\"initial_read\">\n                  Leitura\n                  <Input\n                    className=\"form__input\"\n                    name=\"initial_read\"\n                    type=\"number\"\n                    id=\"initial_read\"\n                    placeholder=\"Informe a leitura\"\n                    step=\"0.01\"\n                  />\n                </label>\n              </div>\n              <div className=\"form__group\">\n                <DatePickerInput\n                  className=\"form__input\"\n                  name=\"read_at_date\"\n                  label=\"Data\"\n                  disabled\n                />\n              </div>\n              <div className=\"form__group\">\n                <TimePickerInput name=\"read_at_time\" label=\"Hora\" disabled />\n              </div>\n              <button className=\"btn btn-add\" type=\"submit\">\n                Editar relógio\n              </button>\n            </Form>\n          </div>\n        </Modal>\n      )}\n\n      {!clocks.length && !loading ? (\n        <StyledContainer className=\"content empty\">\n          <div className=\"inner\">\n            <Icon name=\"iconClockBig\" />\n            <p>\n              Nenhum relógio do tipo{' '}\n              <strong>{clockConfig ? clockConfig.name : 'Todos'}</strong>{' '}\n              encontrado.\n            </p>\n            <button type=\"button\" onClick={handleOpenAddModal}>\n              <Icon name=\"iconClockSmall\" />\n              Cadastrar novo relógio\n            </button>\n          </div>\n        </StyledContainer>\n      ) : (\n        <StyledContainer className=\"content full\">\n          <div className=\"inner\">\n            <div className=\"title\">\n              <p>\n                Relógios cadastrados{' '}\n                <span>\n                  <strong>{clockConfig ? clockConfig.name : 'Todos'}</strong>\n                </span>\n              </p>\n              <button type=\"button\" onClick={handleOpenAddModal}>\n                <Icon name=\"iconPlus\" />\n                Cadastrar relógio\n              </button>\n            </div>\n            <TableWrapper>\n              <table>\n                <thead>\n                  <tr>\n                    <th>Nome do relógio</th>\n                    <th width=\"15%\">Unidade de medida</th>\n                    <th>Data</th>\n                    <th>Hora</th>\n                    <th>Leitura</th>\n                    <th>&nbsp;</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {loading ? (\n                    <tr>\n                      <td>\n                        <Shimmer>\n                          <LoadLine />\n                        </Shimmer>\n                      </td>\n                      <td>\n                        <Shimmer>\n                          <LoadLine />\n                        </Shimmer>\n                      </td>\n                      <td>\n                        <Shimmer>\n                          <LoadLine />\n                        </Shimmer>\n                      </td>\n                      <td>\n                        <Shimmer>\n                          <LoadLine />\n                        </Shimmer>\n                      </td>\n                      <td colSpan=\"2\">\n                        <Shimmer>\n                          <LoadLine />\n                        </Shimmer>\n                      </td>\n                    </tr>\n                  ) : (\n                    clocks.map(item => (\n                      <tr key={item.id}>\n                        <td>{item.name}</td>\n                        <td>{item.read_unit_of_measurement_formatted}</td>\n                        <td>{item.read_at_date}</td>\n                        <td>{item.read_at_time}</td>\n                        <td>{item.initial_read}</td>\n                        <td width=\"75\">\n                          <TableDropDownCustom>\n                            <button\n                              type=\"button\"\n                              onClick={() => {\n                                handleOpenEditModal(item.id);\n                              }}\n                            >\n                              Editar\n                            </button>\n                            <button\n                              type=\"button\"\n                              onClick={() => {\n                                handleDeleteClock(item);\n                              }}\n                            >\n                              Excluir\n                            </button>\n                          </TableDropDownCustom>\n                        </td>\n                      </tr>\n                    ))\n                  )}\n                </tbody>\n              </table>\n            </TableWrapper>\n          </div>\n        </StyledContainer>\n      )}\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}