{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\henriquet\\\\Desktop\\\\projetos\\\\SIM_WEB\\\\src\\\\pages\\\\Receita\\\\components\\\\IncomeFormModal.js\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useSelector } from 'react-redux';\nimport * as Yup from 'yup';\nimport { toast } from 'react-toastify';\nimport PropTypes from 'prop-types';\nimport { Form } from '@rocketseat/unform';\nimport Icon from '../../../components/Icons';\nimport CurrencyInput from '../../../components/CurrencyInput';\nimport api from '../../../services/api';\nconst schema = Yup.object().shape({\n  value: Yup.number().positive('Receita deve ser maior que 0.').required('Receita é obrigatória.')\n});\nexport default function IncomeFormModal({\n  handleClose,\n  item,\n  loadIncome\n}) {\n  const [income, setIcome] = useState([]);\n  const [initialData, setInitialData] = useState();\n  const [isEdit, setEdit] = useState(false);\n  const hotelName = useSelector(state => state.user.profile.activeHotelName);\n  const buttonRef = useRef(null);\n\n  async function handleSubmit(data) {\n    const {\n      id_financial_income = item,\n      value\n    } = data;\n    await api.put(`/financial-incomes/${item}`, {\n      id_financial_income,\n      value\n    });\n\n    if (isEdit) {\n      toast.success('Receita mensal editada com sucesso.');\n    } else {\n      toast.success('Receita mensal cadastrada com sucesso.');\n    }\n\n    handleClose();\n    loadIncome();\n  }\n\n  useEffect(() => {\n    async function loadData() {\n      const response = await api.get(`/financial-incomes/${item}`, {\n        params: {}\n      });\n      const {\n        data\n      } = response;\n\n      if (data.value) {\n        setEdit(true);\n      }\n\n      setInitialData({ ...data\n      });\n      setIcome(data);\n    }\n\n    loadData();\n  }, [item]);\n  useEffect(() => {\n    document.getElementById('income').focus();\n    buttonRef.current.addEventListener('focus', function () {\n      document.getElementById('button').setAttribute('style', 'opacity: 0.7');\n    });\n    buttonRef.current.addEventListener('blur', function () {\n      document.getElementById('button').removeAttribute('style', 'opacity: 0');\n    });\n  }, []);\n  return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n    className: \"modal__header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, isEdit ? React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, \"Editar receita\") : React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, \"Incluir receita\"), React.createElement(\"button\", {\n    className: \"close\",\n    type: \"button\",\n    onClick: handleClose,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, React.createElement(Icon, {\n    name: \"iconDelete\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"modal__body\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"modal__group-info\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    className: \"modal__group-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, \"Cadastre a Receita realizada pelo hotel\", React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }), \"mensalmente para que possa comparar\", React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }), \"a receita or\\xE7ada x a realizada.\")), React.createElement(\"div\", {\n    className: \"modal__group-info\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"modal__group-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, \"Empreendimento\"), React.createElement(\"span\", {\n    className: \"modal__group-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }, hotelName)), React.createElement(Form, {\n    schema: schema,\n    onSubmit: handleSubmit,\n    initialData: initialData,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"modal__group-info\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"modal__group-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, \"M\\xEAs\"), React.createElement(\"span\", {\n    className: \"modal__group-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, income.month, \" / \", income.year)), React.createElement(\"div\", {\n    className: \"form__group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, React.createElement(CurrencyInput, {\n    id: \"income\",\n    className: \"form__input\",\n    name: \"value\",\n    onChange: () => {},\n    label: \"Receita\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  })), React.createElement(\"button\", {\n    className: \"btn btn-add\",\n    type: \"submit\",\n    id: \"button\",\n    ref: buttonRef,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, isEdit ? 'Concluir edição' : 'Incluir receita'))));\n}\nIncomeFormModal.propTypes = {\n  handleClose: PropTypes.func.isRequired,\n  item: PropTypes.number,\n  loadIncome: PropTypes.func.isRequired\n};\nIncomeFormModal.defaultProps = {\n  item: null\n};","map":{"version":3,"sources":["C:/Users/henriquet/Desktop/projetos/SIM_WEB/src/pages/Receita/components/IncomeFormModal.js"],"names":["React","useState","useEffect","useRef","useSelector","Yup","toast","PropTypes","Form","Icon","CurrencyInput","api","schema","object","shape","value","number","positive","required","IncomeFormModal","handleClose","item","loadIncome","income","setIcome","initialData","setInitialData","isEdit","setEdit","hotelName","state","user","profile","activeHotelName","buttonRef","handleSubmit","data","id_financial_income","put","success","loadData","response","get","params","document","getElementById","focus","current","addEventListener","setAttribute","removeAttribute","month","year","propTypes","func","isRequired","defaultProps"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport * as Yup from 'yup';\nimport { toast } from 'react-toastify';\nimport PropTypes from 'prop-types';\nimport { Form } from '@rocketseat/unform';\n\nimport Icon from '../../../components/Icons';\nimport CurrencyInput from '../../../components/CurrencyInput';\n\nimport api from '../../../services/api';\n\nconst schema = Yup.object().shape({\n  value: Yup.number()\n    .positive('Receita deve ser maior que 0.')\n    .required('Receita é obrigatória.'),\n});\n\nexport default function IncomeFormModal({ handleClose, item, loadIncome }) {\n  const [income, setIcome] = useState([]);\n  const [initialData, setInitialData] = useState();\n  const [isEdit, setEdit] = useState(false);\n\n  const hotelName = useSelector(state => state.user.profile.activeHotelName);\n\n  const buttonRef = useRef(null);\n\n  async function handleSubmit(data) {\n    const { id_financial_income = item, value } = data;\n\n    await api.put(`/financial-incomes/${item}`, { id_financial_income, value });\n\n    if (isEdit) {\n      toast.success('Receita mensal editada com sucesso.');\n    } else {\n      toast.success('Receita mensal cadastrada com sucesso.');\n    }\n\n    handleClose();\n    loadIncome();\n  }\n\n  useEffect(() => {\n    async function loadData() {\n      const response = await api.get(`/financial-incomes/${item}`, {\n        params: {},\n      });\n\n      const { data } = response;\n\n      if (data.value) {\n        setEdit(true);\n      }\n\n      setInitialData({\n        ...data,\n      });\n\n      setIcome(data);\n    }\n    loadData();\n  }, [item]);\n\n  useEffect(() => {\n    document.getElementById('income').focus();\n\n    buttonRef.current.addEventListener('focus', function() {\n      document.getElementById('button').setAttribute('style', 'opacity: 0.7');\n    });\n\n    buttonRef.current.addEventListener('blur', function() {\n      document.getElementById('button').removeAttribute('style', 'opacity: 0');\n    });\n  }, []);\n\n  return (\n    <>\n      <div className=\"modal__header\">\n        {isEdit ? <h3>Editar receita</h3> : <h3>Incluir receita</h3>}\n        <button className=\"close\" type=\"button\" onClick={handleClose}>\n          <Icon name=\"iconDelete\" />\n        </button>\n      </div>\n      <div className=\"modal__body\">\n        <div className=\"modal__group-info\">\n          <span className=\"modal__group-text\">\n            Cadastre a Receita realizada pelo hotel\n            <br />\n            mensalmente para que possa comparar\n            <br />a receita orçada x a realizada.\n          </span>\n        </div>\n        <div className=\"modal__group-info\">\n          <p className=\"modal__group-title\">Empreendimento</p>\n          <span className=\"modal__group-text\">{hotelName}</span>\n        </div>\n        <Form schema={schema} onSubmit={handleSubmit} initialData={initialData}>\n          <div className=\"modal__group-info\">\n            <p className=\"modal__group-title\">Mês</p>\n            <span className=\"modal__group-text\">\n              {income.month} / {income.year}\n            </span>\n          </div>\n          <div className=\"form__group\">\n            <CurrencyInput\n              id=\"income\"\n              className=\"form__input\"\n              name=\"value\"\n              onChange={() => {}}\n              label=\"Receita\"\n            />\n          </div>\n          <button\n            className=\"btn btn-add\"\n            type=\"submit\"\n            id=\"button\"\n            ref={buttonRef}\n          >\n            {isEdit ? 'Concluir edição' : 'Incluir receita'}\n          </button>\n        </Form>\n      </div>\n    </>\n  );\n}\n\nIncomeFormModal.propTypes = {\n  handleClose: PropTypes.func.isRequired,\n  item: PropTypes.number,\n  loadIncome: PropTypes.func.isRequired,\n};\n\nIncomeFormModal.defaultProps = {\n  item: null,\n};\n"]},"metadata":{},"sourceType":"module"}