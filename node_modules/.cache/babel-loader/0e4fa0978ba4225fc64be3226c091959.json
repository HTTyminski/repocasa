{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\henriquet\\\\Desktop\\\\projetos\\\\SIM_WEB\\\\src\\\\pages\\\\Relogios\\\\index.js\";\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { useSelector } from 'react-redux';\nimport * as Yup from 'yup';\nimport Shimmer from 'react-shimmer-effect';\nimport { toast } from 'react-toastify';\nimport { format, parseISO } from 'date-fns';\nimport { Form, Input, Select } from '@rocketseat/unform';\nimport { confirmAlert } from 'react-confirm-alert';\nimport 'react-confirm-alert/src/react-confirm-alert.css';\nimport Icon from '../../components/Icons';\nimport Modal from '../../components/Modal';\nimport LoadLine from '../../components/LoadLine';\nimport ConfirmAlert from '../../components/ConfirmAlert';\nimport DatePickerInput from '../../components/DatePickerInput';\nimport TimePickerInput from '../../components/TimePickerInput';\nimport TableDropDownCustom from '../../components/TableDropDownCustom';\nimport { StyledContainer, TableWrapper } from './styles';\nimport api from '../../services/api';\n\nfunction emptyStringToNull(value, originalValue) {\n  if (typeof originalValue === 'string' && originalValue === '') {\n    return null;\n  }\n\n  return value;\n}\n\nconst schemaCreate = Yup.object().shape({\n  name: Yup.string().max(50, 'O nome deve ter no máximo 50 caracteres.').required('Nome do relógio é obrigatório.'),\n  initial_read: Yup.number().positive('O número deve ser maior que zero.').test('len', 'A Leitura dever ter no máximo 35 caracteres.', val => Math.ceil(Math.log10(val + 1)) <= 35).transform(emptyStringToNull).nullable().required('Leitura do relógio é obrigatória.'),\n  read_at_date: Yup.date().required('Data é obrigatória.'),\n  read_at_time: Yup.string().transform(emptyStringToNull).nullable().required('Hora é obrigatória.'),\n  read_unit_of_measurement: Yup.string(),\n  hour12: Yup.number(),\n  minute: Yup.number()\n});\nconst schemaEdit = Yup.object().shape({\n  name: Yup.string().required('Nome do relógio é obrigatório.'),\n  initial_read: Yup.number().positive('O número deve ser maior que zero.').transform(emptyStringToNull).nullable().required('Leitura do relógio é obrigatória.')\n});\nconst clocksConfigs = [{\n  name: 'Gás',\n  value: 'GAS',\n  measurement: [{\n    name: 'quilograma',\n    value: 'KG'\n  }, {\n    name: 'metro cúbico (m³)',\n    value: 'M3'\n  }]\n}, {\n  name: 'Energia',\n  value: 'ELECTRICITY',\n  measurement: [{\n    name: 'quilowatt (kW)',\n    value: 'KW'\n  }]\n}, {\n  name: 'Água',\n  value: 'WATER',\n  measurement: [{\n    name: 'metro cúbico (m³)',\n    value: 'M3'\n  }]\n}];\nexport default function Relogios() {\n  const [loading, setLoading] = useState(false);\n  const [clocks, setClocks] = useState([]);\n  const [createModal, setCreateModal] = useState(false);\n  const [editModal, setEditModal] = useState(false);\n  const [getId, setId] = useState(); // eslint-disable-line\n\n  const [getItem, setItem] = useState();\n  const [initialData, setInitialData] = useState();\n  const ref = useRef(null);\n\n  const onButtonClick = () => {\n    ref.current.focus(); // console.log(document.getElementById('inputEl').focus());\n  };\n\n  const clock = useSelector(state => state.clock);\n  console.log('clock state', clock);\n  const strClockType = clock.consumption.join();\n  const clockConfig = clocksConfigs.find(a => a.value === clock.consumption[0]);\n  const clockConfigMeasurement = clockConfig && clockConfig.measurement.map(item => {\n    return {\n      id: item.value,\n      title: item.name\n    };\n  });\n  const hotelID = useSelector(state => state.user.profile.activeHotel);\n  const hotelName = useSelector(state => state.user.profile.activeHotelName);\n  const loadClocks = useCallback(async () => {\n    try {\n      setLoading(true);\n      const response = await api.get(`/clocks`, {\n        params: {\n          hotel_id: hotelID,\n          clock_type: strClockType\n        }\n      });\n      const mapped = response.data.map(item => ({ ...item,\n        read_at_date: format(new Date(item.read_at_date), 'dd/MM/yyyy')\n      }));\n      setClocks(mapped);\n    } catch (error) {\n      toast.error('Não foi possível carregar relógios.');\n    }\n\n    setLoading(false);\n  }, [hotelID, strClockType]);\n  useEffect(() => {\n    document.title = 'SIM - Consumo | Relógios';\n    loadClocks();\n  }, [loadClocks]);\n  const buttonRef = useRef(null);\n  useEffect(() => {// buttonRef.current.addEventListener('focus', function() {\n    //   document\n    //     .getElementById('submitButton')\n    //     .setAttribute('style', 'opacity: 0.7');\n    // });\n    // buttonRef.current.addEventListener('blur', function() {\n    //   document\n    //     .getElementById('submitButton')\n    //     .removeAttribute('style', 'opacity: 0');\n    // });\n  }, [editModal, createModal]);\n\n  function handleOpenAddModal() {\n    setCreateModal(true);\n  }\n\n  function handleCloseAddModal() {\n    setCreateModal(false);\n  }\n\n  async function getById(id) {\n    const response = await api.get(`/clocks/${id}`, {\n      params: {}\n    });\n    const {\n      data\n    } = response; // const hour = response.data.time.split(':')[0];\n    // const minute = response.data.time.split(':')[1];\n\n    setInitialData({ ...data,\n      read_at_date: parseISO(response.data.read_at_date)\n    });\n    setItem(response.data);\n  }\n\n  function handleOpenEditModal(id) {\n    setEditModal(true);\n    getById(id);\n  }\n\n  function handleCloseEditModal() {\n    setItem(null);\n    setEditModal(false);\n  }\n\n  async function handleSubmit(data) {\n    try {\n      const {\n        name,\n        hotel_id = Number(hotelID),\n        clock_type = strClockType,\n        initial_read,\n        read_at_date,\n        read_at_time,\n        read_unit_of_measurement\n      } = data;\n      const resultAdd = await api.post('/clocks', {\n        name,\n        hotel_id,\n        clock_type,\n        initial_read,\n        read_at_date,\n        read_at_time,\n        read_unit_of_measurement\n      });\n      console.log('resultAdd: ', resultAdd);\n      toast.success('Relógio cadastrado com sucesso.');\n      handleCloseAddModal();\n      loadClocks();\n    } catch (error) {\n      if (error.response && error.response.data.errors) {\n        if (error.response.data.errors[0] === 'There is already a Clock with the name and type informed') {\n          toast.error('Já existe um relógio com este nome e mesmo tipo de medida.');\n        } else {\n          toast.error(error.response.data.errors[0]);\n        }\n      } else {\n        toast.error('Erro ao cadastrar relógio.');\n      }\n    }\n  }\n\n  async function handleEditClock(data) {\n    if (getItem.id) {\n      try {\n        const {\n          name,\n          clock_id = getItem.id,\n          initial_read\n        } = data;\n        await api.put(`/clocks`, {\n          name,\n          clock_id,\n          initial_read\n        });\n        toast.success('Relógio alterado com sucesso.');\n        handleCloseEditModal();\n        loadClocks();\n      } catch (err) {\n        toast.error('Erro ao editar relógio.');\n      }\n    }\n  }\n\n  async function handleDeleteClock(item) {\n    function deleteClock() {\n      try {\n        api.delete(`/clocks/${item.id}`);\n        toast.success('Relógio excluído com sucesso.');\n        setClocks(clocks.filter(currentClock => currentClock.id !== item.id));\n      } catch (err) {\n        toast.error('Não foi possível remover o relógio selecionado.');\n      }\n    }\n\n    confirmAlert({\n      customUI: ({\n        onClose\n      } // eslint-disable-line\n      ) => React.createElement(ConfirmAlert, {\n        callback: deleteClock,\n        onClose: onClose,\n        icon: React.createElement(Icon, {\n          name: \"iconTrash\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 289\n          },\n          __self: this\n        }),\n        title: \"Deletar rel\\xF3gio\",\n        message: React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 292\n          },\n          __self: this\n        }, \"Tem certeza que deseja deletar o rel\\xF3gio\", ' ', React.createElement(\"strong\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 294\n          },\n          __self: this\n        }, item.name), \" selecionado?\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286\n        },\n        __self: this\n      })\n    });\n  }\n\n  return React.createElement(React.Fragment, null, createModal && React.createElement(Modal, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 305\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"modal__header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307\n    },\n    __self: this\n  }, \"Incluir rel\\xF3gio\"), React.createElement(\"button\", {\n    className: \"close\",\n    type: \"button\",\n    onClick: handleCloseAddModal,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308\n    },\n    __self: this\n  }, React.createElement(Icon, {\n    name: \"iconDelete\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"modal__body\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"modal__group-info\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"modal__group-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318\n    },\n    __self: this\n  }, \"Empreendimento\"), React.createElement(\"span\", {\n    className: \"modal__group-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319\n    },\n    __self: this\n  }, hotelName)), clock.consumption.length > 0 && React.createElement(\"div\", {\n    className: \"modal__group-info\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 322\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"modal__group-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 323\n    },\n    __self: this\n  }, \"Tipo\"), React.createElement(\"span\", {\n    className: \"modal__group-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 324\n    },\n    __self: this\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 325\n    },\n    __self: this\n  }, clockConfig.name))), React.createElement(Form, {\n    schema: schemaCreate,\n    onSubmit: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 329\n    },\n    __self: this\n  }, clockConfig && React.createElement(\"div\", {\n    className: \"form__group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 331\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"read_unit_of_measurement\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 332\n    },\n    __self: this\n  }, \"Medida\", React.createElement(Select, {\n    className: \"form__input\",\n    name: \"read_unit_of_measurement\",\n    options: clockConfigMeasurement,\n    placeholder: \"Selecionar medida...\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 334\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form__group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 343\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 344\n    },\n    __self: this\n  }, \"Nome do rel\\xF3gio\", React.createElement(Input, {\n    className: \"form__input\",\n    name: \"name\",\n    type: \"text\",\n    id: \"name\",\n    placeholder: \"Informe o nome\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 346\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form__group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 355\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"initial_read\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 356\n    },\n    __self: this\n  }, \"Leitura\", React.createElement(Input, {\n    className: \"form__input\",\n    name: \"initial_read\",\n    type: \"number\",\n    id: \"initial_read\",\n    placeholder: \"Informe a leitura\",\n    step: \"0.01\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 358\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form__group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 368\n    },\n    __self: this\n  }, React.createElement(DatePickerInput, {\n    className: \"form__input\",\n    name: \"read_at_date\",\n    label: \"Data\",\n    disabled: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 369\n    },\n    __self: this\n  })), React.createElement(\"button\", {\n    type: \"button\",\n    onClick: () => onButtonClick(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 377\n    },\n    __self: this\n  }, \"Focus no input\"), React.createElement(\"div\", {\n    className: \"form__group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 381\n    },\n    __self: this\n  }, React.createElement(TimePickerInput, {\n    id: \"inputEl\",\n    ref: ref,\n    name: \"read_at_time\",\n    label: \"Hora\",\n    format: \"HH:mm\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 382\n    },\n    __self: this\n  })), React.createElement(\"button\", {\n    id: \"submitButton\",\n    className: \"btn btn-add\",\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 390\n    },\n    __self: this\n  }, \"Cadastrar rel\\xF3gio\")))), editModal && getItem && React.createElement(Modal, {\n    id: getId,\n    name: getItem.name,\n    initial_read: getItem.initial_read,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 399\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"modal__header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 404\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 405\n    },\n    __self: this\n  }, \"Editar rel\\xF3gio\"), React.createElement(\"button\", {\n    className: \"close\",\n    type: \"button\",\n    onClick: handleCloseEditModal,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 406\n    },\n    __self: this\n  }, React.createElement(Icon, {\n    name: \"iconDelete\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 411\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"modal__body\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 414\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"modal__group-info\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 415\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"modal__group-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 416\n    },\n    __self: this\n  }, \"Empreendimento\"), React.createElement(\"span\", {\n    className: \"modal__group-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 417\n    },\n    __self: this\n  }, hotelName)), React.createElement(\"div\", {\n    className: \"modal__group-info\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 419\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"modal__group-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 420\n    },\n    __self: this\n  }, \"Tipo\"), React.createElement(\"span\", {\n    className: \"modal__group-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 421\n    },\n    __self: this\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 422\n    },\n    __self: this\n  }, clockConfig.name))), React.createElement(Form, {\n    initialData: initialData,\n    schema: schemaEdit,\n    onSubmit: handleEditClock,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 425\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"form__group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 430\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 431\n    },\n    __self: this\n  }, \"Nome do rel\\xF3gio\", React.createElement(Input, {\n    className: \"form__input\",\n    name: \"name\",\n    type: \"text\",\n    id: \"name\",\n    placeholder: \"Informe o nome\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 433\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form__group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 442\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"initial_read\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 443\n    },\n    __self: this\n  }, \"Leitura\", React.createElement(Input, {\n    className: \"form__input\",\n    name: \"initial_read\",\n    type: \"number\",\n    id: \"initial_read\",\n    placeholder: \"Informe a leitura\",\n    step: \"0.01\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 445\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form__group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 456\n    },\n    __self: this\n  }, React.createElement(DatePickerInput, {\n    className: \"form__input\",\n    name: \"read_at_date\",\n    label: \"Data\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 457\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"form__group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 463\n    },\n    __self: this\n  }, React.createElement(TimePickerInput, {\n    name: \"read_at_time\",\n    label: \"Hora\",\n    disabled: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 464\n    },\n    __self: this\n  })), React.createElement(\"button\", {\n    className: \"btn btn-add\",\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 466\n    },\n    __self: this\n  }, \"Editar rel\\xF3gio\")))), !clocks.length && !loading ? React.createElement(StyledContainer, {\n    className: \"content empty\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 475\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"inner\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 476\n    },\n    __self: this\n  }, React.createElement(Icon, {\n    name: \"iconClockBig\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 477\n    },\n    __self: this\n  }), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 478\n    },\n    __self: this\n  }, \"Nenhum rel\\xF3gio do tipo\", ' ', React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 480\n    },\n    __self: this\n  }, clockConfig ? clockConfig.name : 'Todos'), ' ', \"encontrado.\"), React.createElement(\"button\", {\n    type: \"button\",\n    onClick: handleOpenAddModal,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 483\n    },\n    __self: this\n  }, React.createElement(Icon, {\n    name: \"iconClockSmall\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 484\n    },\n    __self: this\n  }), \"Cadastrar novo rel\\xF3gio\"))) : React.createElement(StyledContainer, {\n    className: \"content full\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 490\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"inner\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 491\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 492\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 493\n    },\n    __self: this\n  }, \"Rel\\xF3gios cadastrados\", ' ', React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 495\n    },\n    __self: this\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 496\n    },\n    __self: this\n  }, clockConfig ? clockConfig.name : 'Todos'))), React.createElement(\"button\", {\n    type: \"button\",\n    onClick: handleOpenAddModal,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 499\n    },\n    __self: this\n  }, React.createElement(Icon, {\n    name: \"iconPlus\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 500\n    },\n    __self: this\n  }), \"Cadastrar rel\\xF3gio\")), React.createElement(TableWrapper, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 504\n    },\n    __self: this\n  }, React.createElement(\"table\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 505\n    },\n    __self: this\n  }, React.createElement(\"thead\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 506\n    },\n    __self: this\n  }, React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 507\n    },\n    __self: this\n  }, React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 508\n    },\n    __self: this\n  }, \"Nome do rel\\xF3gio\"), React.createElement(\"th\", {\n    width: \"15%\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 509\n    },\n    __self: this\n  }, \"Unidade de medida\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 510\n    },\n    __self: this\n  }, \"Data\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 511\n    },\n    __self: this\n  }, \"Hora\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 512\n    },\n    __self: this\n  }, \"Leitura\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 513\n    },\n    __self: this\n  }, \"\\xA0\"))), React.createElement(\"tbody\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 516\n    },\n    __self: this\n  }, loading ? React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 518\n    },\n    __self: this\n  }, React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 519\n    },\n    __self: this\n  }, React.createElement(Shimmer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 520\n    },\n    __self: this\n  }, React.createElement(LoadLine, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 521\n    },\n    __self: this\n  }))), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 524\n    },\n    __self: this\n  }, React.createElement(Shimmer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 525\n    },\n    __self: this\n  }, React.createElement(LoadLine, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 526\n    },\n    __self: this\n  }))), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 529\n    },\n    __self: this\n  }, React.createElement(Shimmer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 530\n    },\n    __self: this\n  }, React.createElement(LoadLine, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 531\n    },\n    __self: this\n  }))), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 534\n    },\n    __self: this\n  }, React.createElement(Shimmer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 535\n    },\n    __self: this\n  }, React.createElement(LoadLine, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 536\n    },\n    __self: this\n  }))), React.createElement(\"td\", {\n    colSpan: \"2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 539\n    },\n    __self: this\n  }, React.createElement(Shimmer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 540\n    },\n    __self: this\n  }, React.createElement(LoadLine, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 541\n    },\n    __self: this\n  })))) : clocks.map(item => React.createElement(\"tr\", {\n    key: item.id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 547\n    },\n    __self: this\n  }, React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 548\n    },\n    __self: this\n  }, item.name), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 549\n    },\n    __self: this\n  }, item.read_unit_of_measurement_formatted), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 550\n    },\n    __self: this\n  }, item.read_at_date), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 551\n    },\n    __self: this\n  }, item.read_at_time), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 552\n    },\n    __self: this\n  }, item.initial_read), React.createElement(\"td\", {\n    width: \"75\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 553\n    },\n    __self: this\n  }, React.createElement(TableDropDownCustom, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 554\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    type: \"button\",\n    onClick: () => {\n      handleOpenEditModal(item.id);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 555\n    },\n    __self: this\n  }, \"Editar\"), React.createElement(\"button\", {\n    type: \"button\",\n    onClick: () => {\n      handleDeleteClock(item);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 563\n    },\n    __self: this\n  }, \"Excluir\")))))))))));\n}","map":{"version":3,"sources":["C:/Users/henriquet/Desktop/projetos/SIM_WEB/src/pages/Relogios/index.js"],"names":["React","useState","useEffect","useCallback","useRef","useSelector","Yup","Shimmer","toast","format","parseISO","Form","Input","Select","confirmAlert","Icon","Modal","LoadLine","ConfirmAlert","DatePickerInput","TimePickerInput","TableDropDownCustom","StyledContainer","TableWrapper","api","emptyStringToNull","value","originalValue","schemaCreate","object","shape","name","string","max","required","initial_read","number","positive","test","val","Math","ceil","log10","transform","nullable","read_at_date","date","read_at_time","read_unit_of_measurement","hour12","minute","schemaEdit","clocksConfigs","measurement","Relogios","loading","setLoading","clocks","setClocks","createModal","setCreateModal","editModal","setEditModal","getId","setId","getItem","setItem","initialData","setInitialData","ref","onButtonClick","current","focus","clock","state","console","log","strClockType","consumption","join","clockConfig","find","a","clockConfigMeasurement","map","item","id","title","hotelID","user","profile","activeHotel","hotelName","activeHotelName","loadClocks","response","get","params","hotel_id","clock_type","mapped","data","Date","error","document","buttonRef","handleOpenAddModal","handleCloseAddModal","getById","handleOpenEditModal","handleCloseEditModal","handleSubmit","Number","resultAdd","post","success","errors","handleEditClock","clock_id","put","err","handleDeleteClock","deleteClock","delete","filter","currentClock","customUI","onClose","length","read_unit_of_measurement_formatted"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport * as Yup from 'yup';\nimport Shimmer from 'react-shimmer-effect';\nimport { toast } from 'react-toastify';\nimport { format, parseISO } from 'date-fns';\nimport { Form, Input, Select } from '@rocketseat/unform';\nimport { confirmAlert } from 'react-confirm-alert';\nimport 'react-confirm-alert/src/react-confirm-alert.css';\n\nimport Icon from '../../components/Icons';\nimport Modal from '../../components/Modal';\nimport LoadLine from '../../components/LoadLine';\nimport ConfirmAlert from '../../components/ConfirmAlert';\nimport DatePickerInput from '../../components/DatePickerInput';\nimport TimePickerInput from '../../components/TimePickerInput';\n\nimport TableDropDownCustom from '../../components/TableDropDownCustom';\n\nimport { StyledContainer, TableWrapper } from './styles';\n\nimport api from '../../services/api';\n\nfunction emptyStringToNull(value, originalValue) {\n  if (typeof originalValue === 'string' && originalValue === '') {\n    return null;\n  }\n  return value;\n}\n\nconst schemaCreate = Yup.object().shape({\n  name: Yup.string()\n    .max(50, 'O nome deve ter no máximo 50 caracteres.')\n    .required('Nome do relógio é obrigatório.'),\n  initial_read: Yup.number()\n    .positive('O número deve ser maior que zero.')\n    .test(\n      'len',\n      'A Leitura dever ter no máximo 35 caracteres.',\n      val => Math.ceil(Math.log10(val + 1)) <= 35\n    )\n    .transform(emptyStringToNull)\n    .nullable()\n    .required('Leitura do relógio é obrigatória.'),\n  read_at_date: Yup.date().required('Data é obrigatória.'),\n  read_at_time: Yup.string()\n    .transform(emptyStringToNull)\n    .nullable()\n    .required('Hora é obrigatória.'),\n  read_unit_of_measurement: Yup.string(),\n  hour12: Yup.number(),\n  minute: Yup.number(),\n});\n\nconst schemaEdit = Yup.object().shape({\n  name: Yup.string().required('Nome do relógio é obrigatório.'),\n  initial_read: Yup.number()\n    .positive('O número deve ser maior que zero.')\n    .transform(emptyStringToNull)\n    .nullable()\n    .required('Leitura do relógio é obrigatória.'),\n});\n\nconst clocksConfigs = [\n  {\n    name: 'Gás',\n    value: 'GAS',\n    measurement: [\n      { name: 'quilograma', value: 'KG' },\n      { name: 'metro cúbico (m³)', value: 'M3' },\n    ],\n  },\n  {\n    name: 'Energia',\n    value: 'ELECTRICITY',\n    measurement: [{ name: 'quilowatt (kW)', value: 'KW' }],\n  },\n  {\n    name: 'Água',\n    value: 'WATER',\n    measurement: [{ name: 'metro cúbico (m³)', value: 'M3' }],\n  },\n];\n\nexport default function Relogios() {\n  const [loading, setLoading] = useState(false);\n  const [clocks, setClocks] = useState([]);\n  const [createModal, setCreateModal] = useState(false);\n  const [editModal, setEditModal] = useState(false);\n  const [getId, setId] = useState(); // eslint-disable-line\n  const [getItem, setItem] = useState();\n  const [initialData, setInitialData] = useState();\n\n  const ref = useRef(null);\n\n  const onButtonClick = () => {\n    ref.current.focus();\n    // console.log(document.getElementById('inputEl').focus());\n  };\n\n  const clock = useSelector(state => state.clock);\n  console.log('clock state', clock);\n\n  const strClockType = clock.consumption.join();\n  const clockConfig = clocksConfigs.find(a => a.value === clock.consumption[0]);\n\n  const clockConfigMeasurement =\n    clockConfig &&\n    clockConfig.measurement.map(item => {\n      return {\n        id: item.value,\n        title: item.name,\n      };\n    });\n\n  const hotelID = useSelector(state => state.user.profile.activeHotel);\n  const hotelName = useSelector(state => state.user.profile.activeHotelName);\n\n  const loadClocks = useCallback(async () => {\n    try {\n      setLoading(true);\n\n      const response = await api.get(`/clocks`, {\n        params: {\n          hotel_id: hotelID,\n          clock_type: strClockType,\n        },\n      });\n\n      const mapped = response.data.map(item => ({\n        ...item,\n        read_at_date: format(new Date(item.read_at_date), 'dd/MM/yyyy'),\n      }));\n\n      setClocks(mapped);\n    } catch (error) {\n      toast.error('Não foi possível carregar relógios.');\n    }\n    setLoading(false);\n  }, [hotelID, strClockType]);\n\n  useEffect(() => {\n    document.title = 'SIM - Consumo | Relógios';\n\n    loadClocks();\n  }, [loadClocks]);\n\n  const buttonRef = useRef(null);\n\n  useEffect(() => {\n    // buttonRef.current.addEventListener('focus', function() {\n    //   document\n    //     .getElementById('submitButton')\n    //     .setAttribute('style', 'opacity: 0.7');\n    // });\n    // buttonRef.current.addEventListener('blur', function() {\n    //   document\n    //     .getElementById('submitButton')\n    //     .removeAttribute('style', 'opacity: 0');\n    // });\n  }, [editModal, createModal]);\n\n  function handleOpenAddModal() {\n    setCreateModal(true);\n  }\n\n  function handleCloseAddModal() {\n    setCreateModal(false);\n  }\n\n  async function getById(id) {\n    const response = await api.get(`/clocks/${id}`, {\n      params: {},\n    });\n\n    const { data } = response;\n\n    // const hour = response.data.time.split(':')[0];\n    // const minute = response.data.time.split(':')[1];\n\n    setInitialData({\n      ...data,\n      read_at_date: parseISO(response.data.read_at_date),\n    });\n\n    setItem(response.data);\n  }\n\n  function handleOpenEditModal(id) {\n    setEditModal(true);\n    getById(id);\n  }\n\n  function handleCloseEditModal() {\n    setItem(null);\n    setEditModal(false);\n  }\n\n  async function handleSubmit(data) {\n    try {\n      const {\n        name,\n        hotel_id = Number(hotelID),\n        clock_type = strClockType,\n        initial_read,\n        read_at_date,\n        read_at_time,\n        read_unit_of_measurement,\n      } = data;\n\n      const resultAdd = await api.post('/clocks', {\n        name,\n        hotel_id,\n        clock_type,\n        initial_read,\n        read_at_date,\n        read_at_time,\n        read_unit_of_measurement,\n      });\n\n      console.log('resultAdd: ', resultAdd);\n\n      toast.success('Relógio cadastrado com sucesso.');\n\n      handleCloseAddModal();\n\n      loadClocks();\n    } catch (error) {\n      if (error.response && error.response.data.errors) {\n        if (\n          error.response.data.errors[0] ===\n          'There is already a Clock with the name and type informed'\n        ) {\n          toast.error(\n            'Já existe um relógio com este nome e mesmo tipo de medida.'\n          );\n        } else {\n          toast.error(error.response.data.errors[0]);\n        }\n      } else {\n        toast.error('Erro ao cadastrar relógio.');\n      }\n    }\n  }\n\n  async function handleEditClock(data) {\n    if (getItem.id) {\n      try {\n        const { name, clock_id = getItem.id, initial_read } = data;\n\n        await api.put(`/clocks`, {\n          name,\n          clock_id,\n          initial_read,\n        });\n\n        toast.success('Relógio alterado com sucesso.');\n\n        handleCloseEditModal();\n\n        loadClocks();\n      } catch (err) {\n        toast.error('Erro ao editar relógio.');\n      }\n    }\n  }\n\n  async function handleDeleteClock(item) {\n    function deleteClock() {\n      try {\n        api.delete(`/clocks/${item.id}`);\n\n        toast.success('Relógio excluído com sucesso.');\n\n        setClocks(clocks.filter(currentClock => currentClock.id !== item.id));\n      } catch (err) {\n        toast.error('Não foi possível remover o relógio selecionado.');\n      }\n    }\n\n    confirmAlert({\n      customUI: (\n        { onClose } // eslint-disable-line\n      ) => (\n        <ConfirmAlert\n          callback={deleteClock}\n          onClose={onClose}\n          icon={<Icon name=\"iconTrash\" />}\n          title=\"Deletar relógio\"\n          message={\n            <p>\n              Tem certeza que deseja deletar o relógio{' '}\n              <strong>{item.name}</strong> selecionado?\n            </p>\n          }\n        />\n      ),\n    });\n  }\n\n  return (\n    <>\n      {createModal && (\n        <Modal>\n          <div className=\"modal__header\">\n            <h3>Incluir relógio</h3>\n            <button\n              className=\"close\"\n              type=\"button\"\n              onClick={handleCloseAddModal}\n            >\n              <Icon name=\"iconDelete\" />\n            </button>\n          </div>\n          <div className=\"modal__body\">\n            <div className=\"modal__group-info\">\n              <p className=\"modal__group-title\">Empreendimento</p>\n              <span className=\"modal__group-text\">{hotelName}</span>\n            </div>\n            {clock.consumption.length > 0 && (\n              <div className=\"modal__group-info\">\n                <p className=\"modal__group-title\">Tipo</p>\n                <span className=\"modal__group-text\">\n                  <strong>{clockConfig.name}</strong>\n                </span>\n              </div>\n            )}\n            <Form schema={schemaCreate} onSubmit={handleSubmit}>\n              {clockConfig && (\n                <div className=\"form__group\">\n                  <label htmlFor=\"read_unit_of_measurement\">\n                    Medida\n                    <Select\n                      className=\"form__input\"\n                      name=\"read_unit_of_measurement\"\n                      options={clockConfigMeasurement}\n                      placeholder=\"Selecionar medida...\"\n                    />\n                  </label>\n                </div>\n              )}\n              <div className=\"form__group\">\n                <label htmlFor=\"name\">\n                  Nome do relógio\n                  <Input\n                    className=\"form__input\"\n                    name=\"name\"\n                    type=\"text\"\n                    id=\"name\"\n                    placeholder=\"Informe o nome\"\n                  />\n                </label>\n              </div>\n              <div className=\"form__group\">\n                <label htmlFor=\"initial_read\">\n                  Leitura\n                  <Input\n                    className=\"form__input\"\n                    name=\"initial_read\"\n                    type=\"number\"\n                    id=\"initial_read\"\n                    placeholder=\"Informe a leitura\"\n                    step=\"0.01\"\n                  />\n                </label>\n              </div>\n              <div className=\"form__group\">\n                <DatePickerInput\n                  className=\"form__input\"\n                  name=\"read_at_date\"\n                  label=\"Data\"\n                  disabled\n                />\n              </div>\n\n              <button type=\"button\" onClick={() => onButtonClick()}>\n                Focus no input\n              </button>\n\n              <div className=\"form__group\">\n                <TimePickerInput\n                  id=\"inputEl\"\n                  ref={ref}\n                  name=\"read_at_time\"\n                  label=\"Hora\"\n                  format=\"HH:mm\"\n                />\n              </div>\n              <button id=\"submitButton\" className=\"btn btn-add\" type=\"submit\">\n                Cadastrar relógio\n              </button>\n            </Form>\n          </div>\n        </Modal>\n      )}\n\n      {editModal && getItem && (\n        <Modal\n          id={getId}\n          name={getItem.name}\n          initial_read={getItem.initial_read}\n        >\n          <div className=\"modal__header\">\n            <h3>Editar relógio</h3>\n            <button\n              className=\"close\"\n              type=\"button\"\n              onClick={handleCloseEditModal}\n            >\n              <Icon name=\"iconDelete\" />\n            </button>\n          </div>\n          <div className=\"modal__body\">\n            <div className=\"modal__group-info\">\n              <p className=\"modal__group-title\">Empreendimento</p>\n              <span className=\"modal__group-text\">{hotelName}</span>\n            </div>\n            <div className=\"modal__group-info\">\n              <p className=\"modal__group-title\">Tipo</p>\n              <span className=\"modal__group-text\">\n                <strong>{clockConfig.name}</strong>\n              </span>\n            </div>\n            <Form\n              initialData={initialData}\n              schema={schemaEdit}\n              onSubmit={handleEditClock}\n            >\n              <div className=\"form__group\">\n                <label htmlFor=\"name\">\n                  Nome do relógio\n                  <Input\n                    className=\"form__input\"\n                    name=\"name\"\n                    type=\"text\"\n                    id=\"name\"\n                    placeholder=\"Informe o nome\"\n                  />\n                </label>\n              </div>\n              <div className=\"form__group\">\n                <label htmlFor=\"initial_read\">\n                  Leitura\n                  <Input\n                    className=\"form__input\"\n                    name=\"initial_read\"\n                    type=\"number\"\n                    id=\"initial_read\"\n                    placeholder=\"Informe a leitura\"\n                    step=\"0.01\"\n                  />\n                </label>\n              </div>\n\n              <div className=\"form__group\">\n                <DatePickerInput\n                  className=\"form__input\"\n                  name=\"read_at_date\"\n                  label=\"Data\"\n                />\n              </div>\n              <div className=\"form__group\">\n                <TimePickerInput name=\"read_at_time\" label=\"Hora\" disabled />\n              </div>\n              <button className=\"btn btn-add\" type=\"submit\">\n                Editar relógio\n              </button>\n            </Form>\n          </div>\n        </Modal>\n      )}\n\n      {!clocks.length && !loading ? (\n        <StyledContainer className=\"content empty\">\n          <div className=\"inner\">\n            <Icon name=\"iconClockBig\" />\n            <p>\n              Nenhum relógio do tipo{' '}\n              <strong>{clockConfig ? clockConfig.name : 'Todos'}</strong>{' '}\n              encontrado.\n            </p>\n            <button type=\"button\" onClick={handleOpenAddModal}>\n              <Icon name=\"iconClockSmall\" />\n              Cadastrar novo relógio\n            </button>\n          </div>\n        </StyledContainer>\n      ) : (\n        <StyledContainer className=\"content full\">\n          <div className=\"inner\">\n            <div className=\"title\">\n              <p>\n                Relógios cadastrados{' '}\n                <span>\n                  <strong>{clockConfig ? clockConfig.name : 'Todos'}</strong>\n                </span>\n              </p>\n              <button type=\"button\" onClick={handleOpenAddModal}>\n                <Icon name=\"iconPlus\" />\n                Cadastrar relógio\n              </button>\n            </div>\n            <TableWrapper>\n              <table>\n                <thead>\n                  <tr>\n                    <th>Nome do relógio</th>\n                    <th width=\"15%\">Unidade de medida</th>\n                    <th>Data</th>\n                    <th>Hora</th>\n                    <th>Leitura</th>\n                    <th>&nbsp;</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {loading ? (\n                    <tr>\n                      <td>\n                        <Shimmer>\n                          <LoadLine />\n                        </Shimmer>\n                      </td>\n                      <td>\n                        <Shimmer>\n                          <LoadLine />\n                        </Shimmer>\n                      </td>\n                      <td>\n                        <Shimmer>\n                          <LoadLine />\n                        </Shimmer>\n                      </td>\n                      <td>\n                        <Shimmer>\n                          <LoadLine />\n                        </Shimmer>\n                      </td>\n                      <td colSpan=\"2\">\n                        <Shimmer>\n                          <LoadLine />\n                        </Shimmer>\n                      </td>\n                    </tr>\n                  ) : (\n                    clocks.map(item => (\n                      <tr key={item.id}>\n                        <td>{item.name}</td>\n                        <td>{item.read_unit_of_measurement_formatted}</td>\n                        <td>{item.read_at_date}</td>\n                        <td>{item.read_at_time}</td>\n                        <td>{item.initial_read}</td>\n                        <td width=\"75\">\n                          <TableDropDownCustom>\n                            <button\n                              type=\"button\"\n                              onClick={() => {\n                                handleOpenEditModal(item.id);\n                              }}\n                            >\n                              Editar\n                            </button>\n                            <button\n                              type=\"button\"\n                              onClick={() => {\n                                handleDeleteClock(item);\n                              }}\n                            >\n                              Excluir\n                            </button>\n                          </TableDropDownCustom>\n                        </td>\n                      </tr>\n                    ))\n                  )}\n                </tbody>\n              </table>\n            </TableWrapper>\n          </div>\n        </StyledContainer>\n      )}\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}